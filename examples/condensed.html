<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EG Grid — Condensed</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: #1a1a2e;
      color: #e0e0e0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 48px 32px;
      gap: 16px;
    }

    header { text-align: center; }
    header h1 { font-size: 1.4rem; font-weight: 600; margin-bottom: 4px; }
    header p { font-size: 0.8rem; color: #888; }

    nav { margin-bottom: 16px; }
    nav a { margin-right: 1rem; color: #4facfe; text-decoration: none; }
    nav a:hover { text-decoration: underline; }
    nav a.active { font-weight: bold; color: #fff; }

    .grid {
      display: grid;
      grid-template-columns: repeat(4, 120px);
      grid-auto-rows: 120px;
      gap: 8px;
      background: rgba(255,255,255,0.04);
      padding: 8px;
      border-radius: 12px;
    }

    .item {
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 16px;
      color: white;
      cursor: grab;
      user-select: none;
      -webkit-user-select: none;
      position: relative;
      view-transition-name: var(--item-id);
      transition: filter 0.15s ease;
    }

    .item[data-egg-dragging] {
      cursor: grabbing;
      transform: scale(1.03);
      filter: drop-shadow(0 16px 32px rgba(0,0,0,0.5));
      z-index: 100;
    }
    .item[data-egg-dropping] { z-index: 100; }
    .item[data-egg-selected] { outline: 2px solid #fbbf24; outline-offset: 2px; }
    .item[data-egg-resizing] { z-index: 100; outline: 2px solid rgba(251, 191, 36, 0.5); outline-offset: 2px; }

    /* Resize handle indicators */
    .item::after {
      content: '';
      position: absolute;
      opacity: 0;
      pointer-events: none;
      border-radius: 3px;
      background: rgba(59, 130, 246, 0.7);
    }
    .item[data-egg-handle-hover="se"]::after { opacity: 1; width: 12px; height: 12px; bottom: 4px; right: 4px; }
    .item[data-egg-handle-hover="sw"]::after { opacity: 1; width: 12px; height: 12px; bottom: 4px; left: 4px; }
    .item[data-egg-handle-hover="ne"]::after { opacity: 1; width: 12px; height: 12px; top: 4px; right: 4px; }
    .item[data-egg-handle-hover="nw"]::after { opacity: 1; width: 12px; height: 12px; top: 4px; left: 4px; }
    .item[data-egg-handle-hover="n"]::after { opacity: 1; height: 3px; top: 4px; left: 16px; right: 16px; }
    .item[data-egg-handle-hover="s"]::after { opacity: 1; height: 3px; bottom: 4px; left: 16px; right: 16px; }
    .item[data-egg-handle-hover="e"]::after { opacity: 1; width: 3px; right: 4px; top: 16px; bottom: 16px; }
    .item[data-egg-handle-hover="w"]::after { opacity: 1; width: 3px; left: 4px; top: 16px; bottom: 16px; }

    /* Placeholder */
    .egg-placeholder {
      background: rgba(255,255,255,0.06);
      border: 2px dashed rgba(255,255,255,0.25);
      border-radius: 8px;
    }

    /* Colors */
    .item[data-color="1"] { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    .item[data-color="2"] { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
    .item[data-color="3"] { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
    .item[data-color="4"] { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
    .item[data-color="5"] { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
    .item[data-color="6"] { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); color: #333; }

    /* View Transitions */
    ::view-transition-group(*) { animation-duration: 200ms; animation-timing-function: cubic-bezier(0.2, 0, 0, 1); }
    ::view-transition-old(*) { animation: none; opacity: 0; }
    ::view-transition-new(*) { animation: none; }
    ::view-transition-old(dragging), ::view-transition-new(dragging), ::view-transition-group(dragging) { animation: none; }
    ::view-transition-old(resizing), ::view-transition-new(resizing), ::view-transition-group(resizing) { animation: none; }

    /* Keyboard mode */
    .grid[data-egg-keyboard-mode] { outline: 2px solid rgba(251, 191, 36, 0.3); outline-offset: 4px; }

    .hint { font-size: 0.75rem; color: #555; text-align: center; max-width: 520px; }
  </style>
</head>
<body>
  <nav>
    <a href="../index.html">EG Grid</a>
    <a href="index.html">Architecture</a>
    <a href="practical.html">Practical</a>
    <a href="web-component.html">Web Component</a>
    <a href="frameworks.html">Frameworks</a>
    <a href="condensed.html" class="active">Condensed</a>
  </nav>

  <header>
    <h1>Condensed (single file)</h1>
    <p>Same features, one file. 1,152 lines — vendor it and tweak.</p>
  </header>

  <div class="grid" id="grid">
    <div class="item" data-egg-item="a" data-egg-label="A" data-egg-colspan="2" data-color="1" style="grid-column: 1 / span 2; grid-row: 1; --item-id: a" tabindex="0">A (2×1)</div>
    <div class="item" data-egg-item="b" data-egg-label="B" data-color="2" style="grid-column: 3; grid-row: 1; --item-id: b" tabindex="0">B</div>
    <div class="item" data-egg-item="c" data-egg-label="C" data-color="3" style="grid-column: 4; grid-row: 1; --item-id: c" tabindex="0">C</div>
    <div class="item" data-egg-item="d" data-egg-label="D" data-egg-rowspan="2" data-color="4" style="grid-column: 1; grid-row: 2 / span 2; --item-id: d" tabindex="0">D (1×2)</div>
    <div class="item" data-egg-item="e" data-egg-label="E" data-egg-colspan="2" data-color="5" style="grid-column: 2 / span 2; grid-row: 2; --item-id: e" tabindex="0">E (2×1)</div>
    <div class="item" data-egg-item="f" data-egg-label="F" data-color="6" style="grid-column: 4; grid-row: 2; --item-id: f" tabindex="0">F</div>
    <div class="item" data-egg-item="g" data-egg-label="G" data-color="1" style="grid-column: 2; grid-row: 3; --item-id: g" tabindex="0">G</div>
    <div class="item" data-egg-item="h" data-egg-label="H" data-egg-colspan="2" data-color="2" style="grid-column: 3 / span 2; grid-row: 3; --item-id: h" tabindex="0">H (2×1)</div>
  </div>

  <div class="hint">
    Drag items to rearrange. Resize from corners. Keyboard: <b>Shift+G</b> to enter keyboard mode,
    <b>Enter/Space</b> to grab, <b>arrows/hjkl</b> to move, <b>Shift+arrows</b> to resize, <b>Alt+arrows</b> to select adjacent.
  </div>

  <style id="egg-styles"></style>

  <script type="module">
    import { init } from '../src/eg-grid-condensed.ts';

    const grid = document.getElementById('grid');

    const core = init(grid, {
      algorithm: 'push',
      styleElement: document.getElementById('egg-styles'),
      resize: { handles: 'all', handleSize: 14 },
    });
  </script>
</body>
</html>
