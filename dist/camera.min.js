function e(e,t){for(let[n,r]of Object.entries(t))e.addEventListener(n,r);return()=>{for(let[n,r]of Object.entries(t))e.removeEventListener(n,r)}}function t(e){let t=e.parentElement;for(;t;){let e=getComputedStyle(t),n=e.overflowY,r=e.overflowX;if(n===`auto`||n===`scroll`||r===`auto`||r===`scroll`)return t;t=t.parentElement}return window}function n(e){if(e===window)return{top:0,left:0,width:window.innerWidth,height:window.innerHeight};let t=e.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}}function r(r,i={}){let{mode:a=`contain`,scrollContainer:o,edgeSize:s=60,scrollSpeed:c=15,scrollBehavior:l=`smooth`,scrollMargin:u=20,scrollOnSelect:d=!0,autoScrollOnDrag:f=!0,settleDelay:p=150,core:m}=i,h=a,g=o??t(r),_=null,v=!1,y=null,b=0,x=0,S=null;m&&(m.cameraScrolling=!1);function C(e){e?(m&&(m.cameraScrolling=!0),S&&=(clearTimeout(S),null)):(S&&clearTimeout(S),S=setTimeout(()=>{m&&(m.cameraScrolling=!1),S=null,r.dispatchEvent(new CustomEvent(`egg-camera-settled`,{bubbles:!0}))},p))}function w(e,t=l){if(h===`off`)return;let r=e.getBoundingClientRect(),i=n(g);if(h===`center`){let e=g===window?window.scrollY+r.top-i.height/2+r.height/2:g.scrollTop+r.top-i.top-i.height/2+r.height/2,n=g===window?window.scrollX+r.left-i.width/2+r.width/2:g.scrollLeft+r.left-i.left-i.width/2+r.width/2;g===window?window.scrollTo({top:e,left:n,behavior:t}):g.scrollTo({top:e,left:n,behavior:t})}else e.scrollIntoView({behavior:t,block:`nearest`,inline:`nearest`})}function T(e,t){let r=n(g),i=0,a=0,o=e-r.left,l=t-r.top;return o<s?i=-c*(1-o/s):o>r.width-s&&(i=c*(1-(r.width-o)/s)),l<s?a=-c*(1-l/s):l>r.height-s&&(a=c*(1-(r.height-l)/s)),{x:i,y:a}}let E=!1;function D(){if(!v||!f||h===`off`){_=null,E&&=(C(!1),!1);return}let e=T(b,x);e.x!==0||e.y!==0?(E||C(!0),E=!0,g===window?window.scrollBy(e.x,e.y):(g.scrollLeft+=e.x,g.scrollTop+=e.y)):E&&=(C(!1),!1),_=requestAnimationFrame(D)}function O(){_===null&&(_=requestAnimationFrame(D))}function k(){_!==null&&(cancelAnimationFrame(_),_=null),C(!1)}function A(e){!v||!f||h===`off`||(b=e.clientX,x=e.clientY,O())}function j(e){v=!0,y=e.detail.source,y===`pointer`&&window.addEventListener(`pointermove`,A)}function M(e){h!==`off`&&(e.detail.source===`pointer`?(b=e.detail.x,x=e.detail.y):requestAnimationFrame(()=>{w(e.detail.item,`smooth`)}))}function N(e){let t=y===`pointer`;v=!1,y=null,k(),t&&window.removeEventListener(`pointermove`,A),!t&&d&&setTimeout(()=>{requestAnimationFrame(()=>{w(e.detail.item,`smooth`)})},100)}function P(e){let t=y===`pointer`;v=!1,y=null,k(),t&&window.removeEventListener(`pointermove`,A)}function F(e){!d||h===`off`||v||w(e.detail.item)}let I=e(r,{"egg-drag-start":j,"egg-drag-move":M,"egg-drag-end":N,"egg-drag-cancel":P,"egg-select":F});function L(){k(),I()}return{setMode(e){h=e,h===`off`&&k()},getMode(){return h},scrollTo:w,stop:k,destroy:L}}export{r as attachCamera};
//# sourceMappingURL=camera.min.js.map