function e(e){return(e.phase===`interacting`||e.phase===`committing`)&&e.interaction?.type===`drag`}function t(e){return(e.phase===`interacting`||e.phase===`committing`)&&e.interaction?.type===`resize`}function n(e){let t=getComputedStyle(e);return{column:parseInt(t.gridColumnStart,10)||1,row:parseInt(t.gridRowStart,10)||1}}var r=`
.egg-dev-overlay {
	position: fixed;
	bottom: 16px;
	right: 16px;
	width: 320px;
	max-height: 400px;
	background: rgba(0, 0, 0, 0.95);
	color: #fff;
	font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
	font-size: 12px;
	border-radius: 8px;
	box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
	z-index: 1000;
	display: flex;
	flex-direction: column;
	overflow: hidden;
	view-transition-name: dev-overlay;
}

.egg-dev-overlay[hidden] {
	display: none;
}

.egg-dev-tabs {
	display: flex;
	border-bottom: 1px solid #333;
	flex-shrink: 0;
}

.egg-dev-tab {
	flex: 1;
	padding: 8px 12px;
	background: transparent;
	border: none;
	color: #888;
	cursor: pointer;
	font-family: inherit;
	font-size: 11px;
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.egg-dev-tab:hover {
	color: #ccc;
}

.egg-dev-tab[data-active="true"] {
	color: #fff;
	background: #222;
}

.egg-dev-content {
	flex: 1;
	overflow-y: auto;
	padding: 12px;
}

.egg-dev-section {
	margin-bottom: 12px;
}

.egg-dev-section:last-child {
	margin-bottom: 0;
}

.egg-dev-section-title {
	color: #888;
	font-size: 10px;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	margin-bottom: 6px;
}

.egg-dev-grid-info {
	display: grid;
	grid-template-columns: 1fr 1fr;
	gap: 4px;
}

.egg-dev-info-item {
	display: flex;
	justify-content: space-between;
}

.egg-dev-info-label {
	color: #888;
}

.egg-dev-info-value {
	color: #4ade80;
}

.egg-dev-items-list {
	max-height: 120px;
	overflow-y: auto;
}

.egg-dev-item-row {
	display: flex;
	justify-content: space-between;
	padding: 2px 0;
	border-bottom: 1px solid #222;
}

.egg-dev-item-id {
	color: #60a5fa;
}

.egg-dev-item-pos {
	color: #888;
}

.egg-dev-event-log {
	max-height: 150px;
	overflow-y: auto;
}

.egg-dev-event {
	padding: 2px 0;
	border-bottom: 1px solid #222;
	display: flex;
	gap: 8px;
}

.egg-dev-event-time {
	color: #666;
	flex-shrink: 0;
}

.egg-dev-event-type {
	color: #f472b6;
	flex-shrink: 0;
}

.egg-dev-event-detail {
	color: #888;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

.egg-dev-config-row {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 6px 0;
	border-bottom: 1px solid #222;
}

.egg-dev-config-label {
	color: #ccc;
}

.egg-dev-toggle {
	position: relative;
	width: 36px;
	height: 20px;
	background: #444;
	border-radius: 10px;
	cursor: pointer;
	transition: background 0.2s;
}

.egg-dev-toggle[data-checked="true"] {
	background: #4ade80;
}

.egg-dev-toggle::after {
	content: '';
	position: absolute;
	top: 2px;
	left: 2px;
	width: 16px;
	height: 16px;
	background: #fff;
	border-radius: 50%;
	transition: transform 0.2s;
}

.egg-dev-toggle[data-checked="true"]::after {
	transform: translateX(16px);
}

.egg-dev-select {
	background: #333;
	color: #fff;
	border: 1px solid #444;
	border-radius: 4px;
	padding: 4px 8px;
	font-family: inherit;
	font-size: 12px;
}

.egg-dev-close {
	position: absolute;
	top: 8px;
	right: 8px;
	background: transparent;
	border: none;
	color: #666;
	cursor: pointer;
	font-size: 16px;
	line-height: 1;
	padding: 4px;
}

.egg-dev-close:hover {
	color: #fff;
}

.egg-dev-hint {
	color: #666;
	font-size: 10px;
	text-align: center;
	padding: 8px;
	border-top: 1px solid #222;
}

.egg-dev-action-btn {
	background: #333;
	color: #fff;
	border: 1px solid #444;
	border-radius: 4px;
	padding: 6px 12px;
	font-family: inherit;
	font-size: 12px;
	cursor: pointer;
	transition: background 0.2s;
}

.egg-dev-action-btn:hover {
	background: #444;
}

.egg-dev-action-btn:active {
	background: #555;
}

.egg-dev-status {
	color: #888;
	font-size: 11px;
	margin-top: 4px;
}
`;function i(i,a={}){let{initialTab:o=`debug`,toggleKey:s=`D`,visible:c=!1,core:l}=a,u=document.getElementById(`egg-dev-overlay-styles`);u||(u=document.createElement(`style`),u.id=`egg-dev-overlay-styles`,u.textContent=r,document.head.appendChild(u));let d=o,f=c,p=[],m=[],h=performance.now(),g=document.createElement(`div`);g.className=`egg-dev-overlay`,g.hidden=!f;function _(e){return`${((e-h)/1e3).toFixed(1)}s`}function v(){let e=l?.getGridInfo(),t=Array.from(i.querySelectorAll(`[data-egg-item]`));g.innerHTML=`
			<button class="egg-dev-close">&times;</button>
			<div class="egg-dev-tabs">
				<button class="egg-dev-tab" data-tab="debug" data-active="${d===`debug`}">Debug</button>
				<button class="egg-dev-tab" data-tab="config" data-active="${d===`config`}">Config</button>
			</div>
			<div class="egg-dev-content">
				${d===`debug`?y(e,t):b()}
			</div>
			<div class="egg-dev-hint">Shift+${s} to toggle</div>
		`,g.querySelector(`.egg-dev-close`)?.addEventListener(`click`,C),g.querySelectorAll(`.egg-dev-tab`).forEach(e=>{e.addEventListener(`click`,()=>{d=e.dataset.tab,v()})}),g.querySelectorAll(`.egg-dev-toggle`).forEach(e=>{e.addEventListener(`click`,()=>{let t=e.dataset.key,n=m.find(e=>e.key===t);n&&n.type===`boolean`&&(n.value=!n.value,n.onChange(n.value),v())})}),g.querySelectorAll(`.egg-dev-select`).forEach(e=>{e.addEventListener(`change`,t=>{let n=e.dataset.key,r=m.find(e=>e.key===n);r&&r.type===`select`&&r.onChange&&(r.value=t.target.value,r.onChange(r.value))})}),g.querySelectorAll(`.egg-dev-action-btn`).forEach(e=>{e.addEventListener(`click`,()=>{let t=e.dataset.key,n=m.find(e=>e.key===t);n&&n.type===`action`&&n.onAction&&n.onAction()})})}function y(r,i){if(!r)return`<div class="egg-dev-section">No core available</div>`;let a=l?.stateMachine.getState(),o=a&&e(a),s=a&&t(a),c=a?.interaction;return`
			${l?`
			<div class="egg-dev-section">
				<div class="egg-dev-section-title">State</div>
				<div class="egg-dev-grid-info">
					<div class="egg-dev-info-item">
						<span class="egg-dev-info-label">phase</span>
						<span class="egg-dev-info-value">${a?.phase??`unknown`}</span>
					</div>
					<div class="egg-dev-info-item">
						<span class="egg-dev-info-label">interaction</span>
						<span class="egg-dev-info-value">${o?`dragging`:s?`resizing`:`none`}${c?` (${c.mode})`:``}</span>
					</div>
					${c?`
					<div class="egg-dev-info-item">
						<span class="egg-dev-info-label">item</span>
						<span class="egg-dev-info-value">${c.itemId||`?`}</span>
					</div>
					`:``}
					<div class="egg-dev-info-item">
						<span class="egg-dev-info-label">selected</span>
						<span class="egg-dev-info-value">${a?.selectedItemId??`none`}</span>
					</div>
				</div>
			</div>
			`:``}
			<div class="egg-dev-section">
				<div class="egg-dev-section-title">Grid Info</div>
				<div class="egg-dev-grid-info">
					<div class="egg-dev-info-item">
						<span class="egg-dev-info-label">Columns</span>
						<span class="egg-dev-info-value">${r.columns.length}</span>
					</div>
					<div class="egg-dev-info-item">
						<span class="egg-dev-info-label">Rows</span>
						<span class="egg-dev-info-value">${r.rows.length}</span>
					</div>
					<div class="egg-dev-info-item">
						<span class="egg-dev-info-label">Cell W</span>
						<span class="egg-dev-info-value">${Math.round(r.cellWidth)}px</span>
					</div>
					<div class="egg-dev-info-item">
						<span class="egg-dev-info-label">Cell H</span>
						<span class="egg-dev-info-value">${Math.round(r.cellHeight)}px</span>
					</div>
					<div class="egg-dev-info-item">
						<span class="egg-dev-info-label">Gap</span>
						<span class="egg-dev-info-value">${r.gap}px</span>
					</div>
					<div class="egg-dev-info-item">
						<span class="egg-dev-info-label">Items</span>
						<span class="egg-dev-info-value">${i.length}</span>
					</div>
				</div>
			</div>
			<div class="egg-dev-section">
				<div class="egg-dev-section-title">Items</div>
				<div class="egg-dev-items-list">
					${i.map(e=>{let t=n(e),r=e.dataset.eggItem||e.dataset.id||e.id||`?`,i=e.getAttribute(`data-egg-colspan`)||`1`,a=e.getAttribute(`data-egg-rowspan`)||`1`;return`
							<div class="egg-dev-item-row">
								<span class="egg-dev-item-id">${r}</span>
								<span class="egg-dev-item-pos">col ${t.column}, row ${t.row} (${i}×${a})</span>
							</div>
						`}).join(``)}
				</div>
			</div>
			<div class="egg-dev-section">
				<div class="egg-dev-section-title">Event Log</div>
				<div class="egg-dev-event-log">
					${p.length===0?`<div style="color: #666">No events yet</div>`:``}
					${p.slice(-20).reverse().map(e=>`
						<div class="egg-dev-event">
							<span class="egg-dev-event-time">${_(e.time)}</span>
							<span class="egg-dev-event-type">${e.type}</span>
							<span class="egg-dev-event-detail">${e.detail}</span>
						</div>
					`).join(``)}
				</div>
			</div>
		`}function b(){if(m.length===0)return`<div style="color: #666; text-align: center; padding: 20px;">No config options registered.<br><br>Use registerOption() to add options.</div>`;let e=m.filter(e=>e.type===`boolean`),t=m.filter(e=>e.type===`select`),n=m.filter(e=>e.type===`action`);return`
			<div class="egg-dev-section">
				<div class="egg-dev-section-title">Options</div>
				${e.map(e=>`
					<div class="egg-dev-config-row">
						<span class="egg-dev-config-label">${e.label}</span>
						<div class="egg-dev-toggle" data-key="${e.key}" data-checked="${e.value}"></div>
					</div>
				`).join(``)}
				${t.map(e=>`
					<div class="egg-dev-config-row">
						<span class="egg-dev-config-label">${e.label}</span>
						<select class="egg-dev-select" data-key="${e.key}">
							${(e.options||[]).map(t=>`<option value="${t}"${t===e.value?` selected`:``}>${t}</option>`).join(``)}
						</select>
					</div>
				`).join(``)}
			</div>
			${n.length>0?`
				<div class="egg-dev-section">
					<div class="egg-dev-section-title">Actions</div>
					${n.map(e=>`
						<div class="egg-dev-config-row">
							<span class="egg-dev-config-label">${e.label}</span>
							<button class="egg-dev-action-btn" data-key="${e.key}">Run</button>
						</div>
					`).join(``)}
				</div>
			`:``}
		`}function x(e,t){p.push({time:performance.now(),type:e,detail:t}),p.length>100&&p.shift(),f&&d===`debug`&&v()}function S(){f=!0,g.hidden=!1,v()}function C(){f=!1,g.hidden=!0}function w(){f?C():S()}function T(e){let t=m.findIndex(t=>t.key===e.key);t>=0?m[t]=e:m.push(e),f&&v()}let E=e=>{let t=e.detail;x(`drag-start`,`${t.item?.dataset?.eggItem||t.item?.dataset?.id||t.item?.id||`?`} at (${t.cell.column}, ${t.cell.row})`)},D=e=>{let t=e.detail;x(`drag-move`,`${t.item?.dataset?.eggItem||t.item?.dataset?.id||t.item?.id||`?`} → (${t.cell.column}, ${t.cell.row})`)},O=e=>{let t=e.detail;x(`drag-end`,`${t.item?.dataset?.eggItem||t.item?.dataset?.id||t.item?.id||`?`} at (${t.cell.column}, ${t.cell.row})`)},k=e=>{let t=e.detail;x(`drag-cancel`,t.item?.dataset?.eggItem||t.item?.dataset?.id||t.item?.id||`?`)},A=e=>{let t=e.detail;x(`select`,t.item?.dataset?.eggItem||t.item?.dataset?.id||t.item?.id||`?`)},j=e=>{let t=e.detail;x(`deselect`,t.item?.dataset?.eggItem||t.item?.dataset?.id||t.item?.id||`none`)},M=e=>{e.key===s&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&(e.preventDefault(),w())};i.addEventListener(`egg-drag-start`,E),i.addEventListener(`egg-drag-move`,D),i.addEventListener(`egg-drag-end`,O),i.addEventListener(`egg-drag-cancel`,k),i.addEventListener(`egg-select`,A),i.addEventListener(`egg-deselect`,j),document.addEventListener(`keydown`,M),document.body.appendChild(g),v();function N(){i.removeEventListener(`egg-drag-start`,E),i.removeEventListener(`egg-drag-move`,D),i.removeEventListener(`egg-drag-end`,O),i.removeEventListener(`egg-drag-cancel`,k),i.removeEventListener(`egg-select`,A),i.removeEventListener(`egg-deselect`,j),document.removeEventListener(`keydown`,M),g.remove()}return{toggle:w,show:S,hide:C,registerOption:T,destroy:N}}export{i as attachDevOverlay};
//# sourceMappingURL=dev-overlay.min.js.map