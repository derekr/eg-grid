{"version":3,"file":"eg-grid.js","names":[],"sources":["../src/eg-grid.ts"],"sourcesContent":["// EG Grid — zero-dependency CSS Grid drag-and-drop\n// Copy this file into your project and tweak as needed.\n// Optionally import { createLayoutModel } from './layout-model' for responsive breakpoint support.\n\n// ── Types ──────────────────────────────────────────────────────────────────────\n\ntype GridCell = { column: number; row: number }\ntype ItemRect = { id: string; column: number; row: number; width: number; height: number }\ntype ResizeHandle = 'nw' | 'ne' | 'sw' | 'se' | 'n' | 's' | 'e' | 'w'\n\ninterface EggCore {\n\telement: HTMLElement\n\tphase: 'idle' | 'selected' | 'interacting'\n\tinteraction: { type: 'drag' | 'resize'; mode: 'pointer' | 'keyboard'; itemId: string; element: HTMLElement; columnCount: number } | null\n\tselectedItem: HTMLElement | null\n\tcameraScrolling: boolean\n\tselect(item: HTMLElement | null): void\n\tdeselect(): void\n\tgetCellFromPoint(x: number, y: number): GridCell | null\n\tgetGridInfo(): { rect: DOMRect; columns: number[]; rows: number[]; gap: number; cellWidth: number; cellHeight: number }\n\temit(event: string, detail: any): void\n\tcommitStyles(): void\n\tbaseCSS: string\n\tpreviewCSS: string\n\tdestroy(): void\n}\n\ninterface InitOptions {\n\talgorithm?: 'push' | false\n\tcompaction?: boolean\n\tresize?: { handles?: 'corners' | 'edges' | 'all'; handleSize?: number; minSize?: { colspan: number; rowspan: number }; maxSize?: { colspan: number; rowspan: number }; showSizeLabel?: boolean } | false\n\tcamera?: { edgeSize?: number; scrollSpeed?: number; scrollMargin?: number; settleDelay?: number } | false\n\tplaceholder?: { className?: string } | false\n\taccessibility?: false\n\tpointer?: false\n\tkeyboard?: false\n\tresponsive?: { layoutModel: ResponsiveLayoutModel; cellSize?: number; gap?: number }\n\tlayoutModel?: ResponsiveLayoutModel\n\tstyleElement?: HTMLStyleElement\n}\n\n// The responsive layout model interface — see layout-model.ts for implementation\ninterface ResponsiveLayoutModel {\n\treadonly maxColumns: number\n\treadonly currentColumnCount: number\n\tgetLayoutForColumns(columnCount: number): Map<string, { column: number; row: number }>\n\tsaveLayout(columnCount: number, positions: Map<string, { column: number; row: number }>): void\n\tupdateItemSize(itemId: string, size: { width: number; height: number }): void\n\tsetCurrentColumnCount(columnCount: number): void\n\tgenerateAllBreakpointCSS(options: { cellSize: number; gap: number; gridSelector?: string }): string\n\tsubscribe(callback: () => void): () => void\n}\n\n// ── Grid Measurement ───────────────────────────────────────────────────────────\n\nfunction parseGridTemplate(template: string): number[] {\n\treturn template.split(' ').filter(Boolean).map(v => parseFloat(v) || 0)\n}\n\nfunction getGridIndex(pos: number, tracks: number[], gap: number): number {\n\tlet acc = 0\n\tconst halfGap = gap / 2\n\tfor (let i = 0; i < tracks.length; i++) {\n\t\tif (pos <= acc + tracks[i]! + halfGap) return i + 1\n\t\tacc += tracks[i]! + gap\n\t}\n\treturn tracks.length || 1\n}\n\nfunction getItemCell(item: HTMLElement): GridCell {\n\tconst s = getComputedStyle(item)\n\treturn { column: parseInt(s.gridColumnStart, 10) || 1, row: parseInt(s.gridRowStart, 10) || 1 }\n}\n\nfunction getItemSize(item: HTMLElement): { colspan: number; rowspan: number } {\n\treturn {\n\t\tcolspan: parseInt(item.getAttribute('data-egg-colspan') || '1', 10) || 1,\n\t\trowspan: parseInt(item.getAttribute('data-egg-rowspan') || '1', 10) || 1,\n\t}\n}\n\nfunction getItemId(el: HTMLElement): string {\n\treturn el.dataset.eggItem || el.dataset.id || el.id || ''\n}\n\n// ── Layout Algorithms ──────────────────────────────────────────────────────────\n\n// Shared\n\nfunction layoutToCSS(items: ItemRect[], opts: { selectorPrefix?: string; selectorSuffix?: string; excludeId?: string; maxColumns?: number } = {}): string {\n\tconst { selectorPrefix = '[data-egg-item=\"', selectorSuffix = '\"]', excludeId, maxColumns } = opts\n\tconst rules: string[] = []\n\tfor (const item of items) {\n\t\tif (item.id === excludeId) continue\n\t\tconst w = maxColumns ? Math.min(item.width, maxColumns) : item.width\n\t\tconst c = maxColumns ? Math.max(1, Math.min(item.column, maxColumns - w + 1)) : item.column\n\t\trules.push(`${selectorPrefix}${item.id}${selectorSuffix} { grid-column: ${c} / span ${w}; grid-row: ${item.row} / span ${item.height}; }`)\n\t}\n\treturn rules.join('\\n')\n}\n\nfunction readItemsFromDOM(container: HTMLElement): ItemRect[] {\n\treturn Array.from(container.querySelectorAll('[data-egg-item]')).map(el => {\n\t\tconst element = el as HTMLElement\n\t\tconst style = getComputedStyle(element)\n\t\treturn {\n\t\t\tid: getItemId(element),\n\t\t\tcolumn: parseInt(style.gridColumnStart, 10) || 1,\n\t\t\trow: parseInt(style.gridRowStart, 10) || 1,\n\t\t\twidth: parseInt(element.getAttribute('data-egg-colspan') || '1', 10) || 1,\n\t\t\theight: parseInt(element.getAttribute('data-egg-rowspan') || '1', 10) || 1,\n\t\t}\n\t})\n}\n\n// Push algorithm\n\nfunction itemsOverlap(a: ItemRect, b: ItemRect): boolean {\n\treturn !(a.column + a.width <= b.column || b.column + b.width <= a.column || a.row + a.height <= b.row || b.row + b.height <= a.row)\n}\n\nfunction pushDown(items: ItemRect[], moved: ItemRect, movedId: string, depth = 0): void {\n\tif (depth > 50) return\n\tconst colliders = items\n\t\t.filter(it => it.id !== movedId && it.id !== moved.id && itemsOverlap(moved, it))\n\t\t.sort((a, b) => b.row - a.row || a.column - b.column)\n\tfor (const c of colliders) {\n\t\tconst newRow = moved.row + moved.height\n\t\tif (c.row < newRow) {\n\t\t\tc.row = newRow\n\t\t\tpushDown(items, c, movedId, depth + 1)\n\t\t}\n\t}\n}\n\nfunction compactUp(items: ItemRect[], excludeId: string): void {\n\tconst sorted = [...items].filter(it => it.id !== excludeId).sort((a, b) => a.row - b.row || a.column - b.column)\n\tfor (const item of sorted) {\n\t\tlet iter = 0\n\t\twhile (item.row > 1 && iter++ < 100) {\n\t\t\titem.row -= 1\n\t\t\tif (items.some(o => o.id !== item.id && itemsOverlap(item, o))) { item.row += 1; break }\n\t\t}\n\t}\n}\n\nfunction calculatePushLayout(items: ItemRect[], movedId: string, targetCell: GridCell, compact = true): ItemRect[] {\n\tconst result = items.map(i => ({ ...i }))\n\tconst moved = result.find(i => i.id === movedId)\n\tif (!moved) return result\n\tmoved.column = targetCell.column\n\tmoved.row = targetCell.row\n\tpushDown(result, moved, movedId)\n\tif (compact) compactUp(result, movedId)\n\treturn result\n}\n\n// ── init() ─────────────────────────────────────────────────────────────────────\n\nexport function init(element: HTMLElement, options: InitOptions = {}): EggCore {\n\tconst cleanups: (() => void)[] = []\n\tconst styleEl = options.styleElement ?? document.createElement('style')\n\tif (!options.styleElement) { document.head.appendChild(styleEl); cleanups.push(() => styleEl.remove()) }\n\n\tconst existingCSS = styleEl.textContent?.trim() || ''\n\tlet selectedElement: HTMLElement | null = null\n\n\tconst core: EggCore = {\n\t\telement,\n\t\tphase: 'idle',\n\t\tinteraction: null,\n\t\tcameraScrolling: false,\n\t\tbaseCSS: existingCSS,\n\t\tpreviewCSS: '',\n\n\t\tget selectedItem() { return selectedElement },\n\t\tset selectedItem(item) { this.select(item) },\n\n\t\tselect(item) {\n\t\t\tif (item === selectedElement) return\n\t\t\tconst prev = selectedElement\n\t\t\tif (prev) prev.removeAttribute('data-egg-selected')\n\t\t\tif (item) {\n\t\t\t\tthis.phase = this.phase === 'idle' ? 'selected' : this.phase\n\t\t\t\tselectedElement = item\n\t\t\t\titem.setAttribute('data-egg-selected', '')\n\t\t\t\tthis.emit('select', { item })\n\t\t\t} else {\n\t\t\t\tif (this.phase === 'selected') this.phase = 'idle'\n\t\t\t\tselectedElement = null\n\t\t\t\tif (prev) this.emit('deselect', { item: prev })\n\t\t\t}\n\t\t},\n\n\t\tdeselect() { this.select(null) },\n\n\t\tgetCellFromPoint(x, y) {\n\t\t\tconst rect = element.getBoundingClientRect()\n\t\t\tif (x < rect.left || x > rect.right || y < rect.top || y > rect.bottom) return null\n\t\t\tconst s = getComputedStyle(element)\n\t\t\tconst cols = parseGridTemplate(s.gridTemplateColumns)\n\t\t\tconst rows = parseGridTemplate(s.gridTemplateRows)\n\t\t\tconst cGap = parseFloat(s.columnGap) || 0\n\t\t\tconst rGap = parseFloat(s.rowGap) || 0\n\t\t\treturn {\n\t\t\t\tcolumn: getGridIndex(x - rect.left + element.scrollLeft, cols, cGap),\n\t\t\t\trow: getGridIndex(y - rect.top + element.scrollTop, rows, rGap),\n\t\t\t}\n\t\t},\n\n\t\tgetGridInfo() {\n\t\t\tconst rect = element.getBoundingClientRect()\n\t\t\tconst s = getComputedStyle(element)\n\t\t\tconst columns = parseGridTemplate(s.gridTemplateColumns)\n\t\t\tconst rows = parseGridTemplate(s.gridTemplateRows)\n\t\t\tconst gap = parseFloat(s.columnGap) || 0\n\t\t\treturn { rect, columns, rows, gap, cellWidth: columns[0] || 0, cellHeight: rows[0] || 0 }\n\t\t},\n\n\t\temit(event, detail) {\n\t\t\telement.dispatchEvent(new CustomEvent(`egg-${event}`, { bubbles: true, detail }))\n\t\t},\n\n\t\tcommitStyles() {\n\t\t\tstyleEl.textContent = [this.baseCSS, this.previewCSS].filter(Boolean).join('\\n\\n')\n\t\t},\n\n\t\tdestroy() { cleanups.forEach(fn => fn()) },\n\t}\n\n\t// ── Pointer ────────────────────────────────────────────────────────────────\n\n\tif (options.pointer !== false) {\n\t\tconst DRAG_THRESHOLD = 5\n\t\tconst PREDICTION_THRESHOLD = 30\n\t\tconst PREDICTION_LEAD = 0.5\n\t\tconst HYSTERESIS = 0.4\n\t\tconst TARGET_DEBOUNCE = 40\n\n\t\tlet pending: { item: HTMLElement; pointerId: number; startX: number; startY: number; rect: DOMRect; startCell: GridCell; colspan: number; rowspan: number } | null = null\n\t\tlet drag: { item: HTMLElement; pointerId: number; offsetX: number; offsetY: number; initialRect: DOMRect; startCell: GridCell; lastCell: GridCell; lastChangeTime: number; colspan: number; rowspan: number; dragStartX: number; dragStartY: number } | null = null\n\n\t\tfunction startDrag(p: NonNullable<typeof pending>, e: PointerEvent) {\n\t\t\tconst { item, pointerId, rect, startCell, colspan, rowspan } = p\n\t\t\tdrag = {\n\t\t\t\titem, pointerId, offsetX: e.clientX - rect.left, offsetY: e.clientY - rect.top,\n\t\t\t\tinitialRect: rect, startCell, lastCell: startCell, lastChangeTime: 0, colspan, rowspan,\n\t\t\t\tdragStartX: e.clientX, dragStartY: e.clientY,\n\t\t\t}\n\t\t\titem.setAttribute('data-egg-dragging', '')\n\t\t\tdocument.body.classList.add('is-dragging')\n\t\t\tconst itemId = getItemId(item)\n\t\t\tcore.phase = 'interacting'\n\t\t\tcore.interaction = { type: 'drag', mode: 'pointer', itemId, element: item, columnCount: core.getGridInfo().columns.length }\n\t\t\tcore.emit('drag-start', { item, cell: startCell, colspan, rowspan, source: 'pointer' })\n\t\t\titem.style.position = 'fixed'\n\t\t\titem.style.left = `${rect.left}px`\n\t\t\titem.style.top = `${rect.top}px`\n\t\t\titem.style.width = `${rect.width}px`\n\t\t\titem.style.height = `${rect.height}px`\n\t\t\titem.style.zIndex = '100'\n\t\t\tpending = null\n\t\t}\n\n\t\tconst onPointerMove = (e: PointerEvent) => {\n\t\t\tif (pending && !drag) {\n\t\t\t\tconst dx = e.clientX - pending.startX, dy = e.clientY - pending.startY\n\t\t\t\tif (Math.sqrt(dx * dx + dy * dy) >= DRAG_THRESHOLD) startDrag(pending, e)\n\t\t\t\telse return\n\t\t\t}\n\t\t\tif (!drag) return\n\t\t\tconst { item, offsetX, offsetY, initialRect, colspan, rowspan } = drag\n\t\t\tconst newLeft = e.clientX - offsetX, newTop = e.clientY - offsetY\n\t\t\titem.style.left = `${newLeft}px`\n\t\t\titem.style.top = `${newTop}px`\n\n\t\t\tlet cx = newLeft + initialRect.width / 2, cy = newTop + initialRect.height / 2\n\t\t\tconst gi = core.getGridInfo()\n\t\t\tconst cdx = e.clientX - drag.dragStartX, cdy = e.clientY - drag.dragStartY\n\t\t\tif (Math.abs(cdx) > PREDICTION_THRESHOLD) cx += Math.sign(cdx) * PREDICTION_LEAD * (gi.cellWidth + gi.gap)\n\t\t\tif (Math.abs(cdy) > PREDICTION_THRESHOLD) cy += Math.sign(cdy) * PREDICTION_LEAD * (gi.cellHeight + gi.gap)\n\n\t\t\tconst rawCell = core.getCellFromPoint(cx, cy)\n\t\t\tif (!rawCell) return\n\t\t\tconst maxCol = Math.max(1, gi.columns.length - colspan + 1)\n\t\t\tconst maxRow = Math.max(1, gi.rows.length - rowspan + 1)\n\t\t\tconst cell = { column: Math.max(1, Math.min(maxCol, rawCell.column)), row: Math.max(1, Math.min(maxRow, rawCell.row)) }\n\n\t\t\tconst now = performance.now()\n\t\t\tif (now - drag.lastChangeTime < TARGET_DEBOUNCE) return\n\t\t\tif (cell.column === drag.lastCell.column && cell.row === drag.lastCell.row) return\n\n\t\t\t// Hysteresis\n\t\t\tconst cellW = gi.cellWidth + gi.gap, cellH = gi.cellHeight + gi.gap\n\t\t\tconst ccx = gi.rect.left + (drag.lastCell.column - 1) * cellW + gi.cellWidth / 2\n\t\t\tconst ccy = gi.rect.top + (drag.lastCell.row - 1) * cellH + gi.cellHeight / 2\n\t\t\tconst offX = (cx - ccx) / cellW, offY = (cy - ccy) / cellH\n\t\t\tconst alignedX = (cell.column > drag.lastCell.column) === (offX > 0)\n\t\t\tconst alignedY = (cell.row > drag.lastCell.row) === (offY > 0)\n\t\t\tif (Math.abs(offX) < (alignedX ? 0.5 : 0.5 + HYSTERESIS) && Math.abs(offY) < (alignedY ? 0.5 : 0.5 + HYSTERESIS)) return\n\n\t\t\tdrag.lastCell = cell\n\t\t\tdrag.lastChangeTime = now\n\t\t\tcore.emit('drag-move', { item, cell, x: e.clientX, y: e.clientY, colspan, rowspan, source: 'pointer' })\n\t\t}\n\n\t\tconst cleanupDrag = () => {\n\t\t\tif (drag) {\n\t\t\t\tconst { item, pointerId } = drag\n\t\t\t\titem.removeAttribute('data-egg-dragging')\n\t\t\t\tdocument.body.classList.remove('is-dragging')\n\t\t\t\titem.style.position = ''; item.style.left = ''; item.style.top = ''\n\t\t\t\titem.style.width = ''; item.style.height = ''; item.style.zIndex = ''\n\t\t\t\titem.releasePointerCapture(pointerId)\n\t\t\t\titem.removeEventListener('pointermove', onPointerMove)\n\t\t\t\titem.removeEventListener('pointerup', onPointerUp)\n\t\t\t\titem.removeEventListener('pointercancel', onPointerCancel)\n\t\t\t\tdrag = null\n\t\t\t}\n\t\t\tif (pending) {\n\t\t\t\tpending.item.releasePointerCapture(pending.pointerId)\n\t\t\t\tpending.item.removeEventListener('pointermove', onPointerMove)\n\t\t\t\tpending.item.removeEventListener('pointerup', onPointerUp)\n\t\t\t\tpending.item.removeEventListener('pointercancel', onPointerCancel)\n\t\t\t\tpending = null\n\t\t\t}\n\t\t}\n\n\t\tconst onPointerUp = (e: PointerEvent) => {\n\t\t\tif (pending && !drag) { cleanupDrag(); return }\n\t\t\tif (!drag) return\n\n\t\t\tconst { item, initialRect, colspan, rowspan, lastCell, offsetX, offsetY, dragStartX, dragStartY } = drag\n\t\t\tconst gi = core.getGridInfo()\n\t\t\tconst cdx = e.clientX - dragStartX, cdy = e.clientY - dragStartY\n\t\t\tconst nL = e.clientX - offsetX, nT = e.clientY - offsetY\n\t\t\tlet ecx = nL + initialRect.width / 2, ecy = nT + initialRect.height / 2\n\t\t\tif (Math.abs(cdx) > PREDICTION_THRESHOLD) ecx += Math.sign(cdx) * PREDICTION_LEAD * (gi.cellWidth + gi.gap)\n\t\t\tif (Math.abs(cdy) > PREDICTION_THRESHOLD) ecy += Math.sign(cdy) * PREDICTION_LEAD * (gi.cellHeight + gi.gap)\n\n\t\t\tconst rawCell = core.getCellFromPoint(ecx, ecy)\n\t\t\tconst firstRect = item.getBoundingClientRect()\n\n\t\t\tlet dropCell = lastCell\n\t\t\tif (rawCell) {\n\t\t\t\tconst maxCol = Math.max(1, gi.columns.length - colspan + 1)\n\t\t\t\tconst maxRow = Math.max(1, gi.rows.length - rowspan + 1)\n\t\t\t\tdropCell = { column: Math.max(1, Math.min(maxCol, rawCell.column)), row: Math.max(1, Math.min(maxRow, rawCell.row)) }\n\t\t\t}\n\n\t\t\tcore.emit('drag-end', { item, cell: dropCell, colspan, rowspan, source: 'pointer' })\n\t\t\tcleanupDrag()\n\t\t\tcore.phase = 'selected'\n\t\t\tcore.interaction = null\n\n\t\t\t// Inline FLIP animation\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tconst lastRect = item.getBoundingClientRect()\n\t\t\t\tconst dx = firstRect.left - lastRect.left, dy = firstRect.top - lastRect.top\n\t\t\t\tif (Math.abs(dx) > 1 || Math.abs(dy) > 1) {\n\t\t\t\t\titem.style.viewTransitionName = 'none'\n\t\t\t\t\titem.setAttribute('data-egg-dropping', '')\n\t\t\t\t\tconst anim = item.animate(\n\t\t\t\t\t\t[{ transform: `translate(${dx}px, ${dy}px)` }, { transform: 'none' }],\n\t\t\t\t\t\t{ duration: 200, easing: 'cubic-bezier(0.2, 0, 0, 1)' },\n\t\t\t\t\t)\n\t\t\t\t\tanim.onfinish = () => {\n\t\t\t\t\t\titem.removeAttribute('data-egg-dropping')\n\t\t\t\t\t\tconst id = getItemId(item)\n\t\t\t\t\t\titem.style.viewTransitionName = id || ''\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tconst onPointerCancel = () => {\n\t\t\tif (drag) {\n\t\t\t\tcore.emit('drag-cancel', { item: drag.item, source: 'pointer' })\n\t\t\t\tcore.phase = 'selected'\n\t\t\t\tcore.interaction = null\n\t\t\t}\n\t\t\tcleanupDrag()\n\t\t}\n\n\t\tconst onPointerDown = (e: PointerEvent) => {\n\t\t\tconst item = (e.target as HTMLElement).closest('[data-egg-item]') as HTMLElement | null\n\t\t\tif (!item) return\n\t\t\tcore.select(item)\n\t\t\te.preventDefault()\n\t\t\tconst rect = item.getBoundingClientRect()\n\t\t\tpending = { item, pointerId: e.pointerId, startX: e.clientX, startY: e.clientY, rect, startCell: getItemCell(item), ...getItemSize(item) }\n\t\t\titem.setPointerCapture(e.pointerId)\n\t\t\titem.addEventListener('pointermove', onPointerMove)\n\t\t\titem.addEventListener('pointerup', onPointerUp)\n\t\t\titem.addEventListener('pointercancel', onPointerCancel)\n\t\t}\n\n\t\tconst onDocPointerDown = (e: PointerEvent) => {\n\t\t\tif (element.contains(e.target as Node) || drag) return\n\t\t\tcore.deselect()\n\t\t}\n\n\t\telement.addEventListener('pointerdown', onPointerDown)\n\t\tdocument.addEventListener('pointerdown', onDocPointerDown)\n\t\tcleanups.push(() => { element.removeEventListener('pointerdown', onPointerDown); document.removeEventListener('pointerdown', onDocPointerDown); cleanupDrag() })\n\t}\n\n\t// ── Resize ─────────────────────────────────────────────────────────────────\n\n\tif (options.resize !== false) {\n\t\tconst resizeOpts = typeof options.resize === 'object' ? options.resize : {}\n\t\tconst handles = resizeOpts.handles ?? 'corners'\n\t\tconst handleSize = resizeOpts.handleSize ?? 12\n\t\tconst minSize = resizeOpts.minSize ?? { colspan: 1, rowspan: 1 }\n\t\tconst maxSize = resizeOpts.maxSize ?? { colspan: 6, rowspan: 6 }\n\t\tconst showSizeLabel = resizeOpts.showSizeLabel ?? true\n\n\t\tconst CURSOR: Record<string, string> = { nw: 'nwse-resize', se: 'nwse-resize', ne: 'nesw-resize', sw: 'nesw-resize', n: 'ns-resize', s: 'ns-resize', e: 'ew-resize', w: 'ew-resize' }\n\n\t\tlet active: {\n\t\t\titem: HTMLElement; pointerId: number; handle: ResizeHandle; startCell: GridCell\n\t\t\torigSize: { colspan: number; rowspan: number }; curCell: GridCell; curSize: { colspan: number; rowspan: number }\n\t\t\tsizeLabel: HTMLElement | null; initRect: DOMRect; startX: number; startY: number\n\t\t} | null = null\n\t\tlet hoveredItem: HTMLElement | null = null\n\t\tlet hoveredHandle: ResizeHandle | null = null\n\n\t\tfunction detectHandle(e: PointerEvent, item: HTMLElement): ResizeHandle | null {\n\t\t\tconst r = item.getBoundingClientRect()\n\t\t\tconst x = e.clientX - r.left, y = e.clientY - r.top\n\t\t\tconst nL = x < handleSize, nR = x > r.width - handleSize, nT = y < handleSize, nB = y > r.height - handleSize\n\t\t\tif (handles === 'corners' || handles === 'all') {\n\t\t\t\tif (nT && nL) return 'nw'; if (nT && nR) return 'ne'; if (nB && nL) return 'sw'; if (nB && nR) return 'se'\n\t\t\t}\n\t\t\tif (handles === 'edges' || handles === 'all') {\n\t\t\t\tif (nT) return 'n'; if (nB) return 's'; if (nL) return 'w'; if (nR) return 'e'\n\t\t\t}\n\t\t\treturn null\n\t\t}\n\n\t\tfunction resetResizeItem(item: HTMLElement, pointerId: number, label: HTMLElement | null) {\n\t\t\titem.releasePointerCapture(pointerId)\n\t\t\titem.removeEventListener('pointermove', onResizePointerMove)\n\t\t\titem.removeEventListener('pointerup', onResizePointerUp)\n\t\t\titem.removeEventListener('pointercancel', onResizePointerCancel)\n\t\t\tif (label) label.remove()\n\t\t\titem.style.position = ''; item.style.left = ''; item.style.top = ''\n\t\t\titem.style.width = ''; item.style.height = ''; item.style.zIndex = ''\n\t\t\tconst id = getItemId(item)\n\t\t\titem.style.viewTransitionName = id || ''\n\t\t\titem.removeAttribute('data-egg-resizing')\n\t\t\titem.removeAttribute('data-egg-handle-active')\n\t\t}\n\n\t\tconst onResizePointerMove = (e: PointerEvent) => {\n\t\t\tif (!active || e.pointerId !== active.pointerId) return\n\t\t\tconst { item, handle, startCell, origSize, initRect, startX, startY, sizeLabel } = active\n\t\t\tconst gi = core.getGridInfo()\n\t\t\tconst dx = e.clientX - startX, dy = e.clientY - startY\n\n\t\t\tlet nW = initRect.width, nH = initRect.height, nL = initRect.left, nT = initRect.top\n\t\t\tconst minW = gi.cellWidth, minH = gi.cellHeight\n\t\t\tconst maxW = Math.min(maxSize.colspan * gi.cellWidth + (maxSize.colspan - 1) * gi.gap, gi.rect.right - initRect.left)\n\t\t\tconst maxH = Math.min(maxSize.rowspan * gi.cellHeight + (maxSize.rowspan - 1) * gi.gap, gi.rect.bottom - initRect.top)\n\n\t\t\tif (handle === 'e' || handle === 'se' || handle === 'ne') nW = Math.max(minW, Math.min(maxW, initRect.width + dx))\n\t\t\tif (handle === 'w' || handle === 'sw' || handle === 'nw') {\n\t\t\t\tconst maxLS = initRect.left - gi.rect.left\n\t\t\t\tconst maxWL = Math.min(maxSize.colspan * gi.cellWidth + (maxSize.colspan - 1) * gi.gap, initRect.width + maxLS)\n\t\t\t\tconst wc = Math.max(-initRect.width + minW, Math.min(maxWL - initRect.width, -dx))\n\t\t\t\tnW = initRect.width + wc; nL = initRect.left - wc\n\t\t\t}\n\t\t\tif (handle === 's' || handle === 'se' || handle === 'sw') nH = Math.max(minH, Math.min(maxH, initRect.height + dy))\n\t\t\tif (handle === 'n' || handle === 'ne' || handle === 'nw') {\n\t\t\t\tconst maxTS = initRect.top - gi.rect.top\n\t\t\t\tconst maxHL = Math.min(maxSize.rowspan * gi.cellHeight + (maxSize.rowspan - 1) * gi.gap, initRect.height + maxTS)\n\t\t\t\tconst hc = Math.max(-initRect.height + minH, Math.min(maxHL - initRect.height, -dy))\n\t\t\t\tnH = initRect.height + hc; nT = initRect.top - hc\n\t\t\t}\n\t\t\titem.style.left = `${nL}px`; item.style.top = `${nT}px`\n\t\t\titem.style.width = `${nW}px`; item.style.height = `${nH}px`\n\n\t\t\tconst cpg = gi.cellWidth + gi.gap, rpg = gi.cellHeight + gi.gap\n\t\t\tconst SNAP = 0.3\n\t\t\tlet pCS = Math.max(minSize.colspan, Math.min(maxSize.colspan, Math.floor((nW + gi.gap) / cpg + (1 - SNAP))))\n\t\t\tlet pRS = Math.max(minSize.rowspan, Math.min(maxSize.rowspan, Math.floor((nH + gi.gap) / rpg + (1 - SNAP))))\n\t\t\tlet pCol = startCell.column, pRow = startCell.row\n\t\t\tif (handle === 'w' || handle === 'sw' || handle === 'nw') pCol = startCell.column + origSize.colspan - pCS\n\t\t\tif (handle === 'n' || handle === 'ne' || handle === 'nw') pRow = startCell.row + origSize.rowspan - pRS\n\n\t\t\tactive.curSize = { colspan: pCS, rowspan: pRS }\n\t\t\tactive.curCell = { column: pCol, row: pRow }\n\t\t\tif (sizeLabel) sizeLabel.textContent = `${pCS}\\u00d7${pRS}`\n\n\t\t\tlet anchorCell: GridCell\n\t\t\tif (handle === 'se' || handle === 's' || handle === 'e') anchorCell = { column: startCell.column, row: startCell.row }\n\t\t\telse if (handle === 'nw' || handle === 'n' || handle === 'w') anchorCell = { column: startCell.column + origSize.colspan - 1, row: startCell.row + origSize.rowspan - 1 }\n\t\t\telse if (handle === 'ne') anchorCell = { column: startCell.column, row: startCell.row + origSize.rowspan - 1 }\n\t\t\telse anchorCell = { column: startCell.column + origSize.colspan - 1, row: startCell.row }\n\n\t\t\tcore.emit('resize-move', { item, cell: { column: pCol, row: pRow }, anchorCell, startCell, colspan: pCS, rowspan: pRS, handle, source: 'pointer' })\n\t\t}\n\n\t\tconst onResizePointerUp = (e: PointerEvent) => {\n\t\t\tif (!active || e.pointerId !== active.pointerId) return\n\t\t\tconst { item, pointerId, curSize, curCell, sizeLabel } = active\n\t\t\titem.setAttribute('data-egg-colspan', String(curSize.colspan))\n\t\t\titem.setAttribute('data-egg-rowspan', String(curSize.rowspan))\n\t\t\tcore.emit('resize-end', { item, cell: curCell, colspan: curSize.colspan, rowspan: curSize.rowspan, source: 'pointer' })\n\t\t\tresetResizeItem(item, pointerId, sizeLabel)\n\t\t\tactive = null\n\t\t\tcore.phase = 'selected'\n\t\t\tcore.interaction = null\n\t\t}\n\n\t\tconst onResizePointerCancel = (e: PointerEvent) => {\n\t\t\tif (!active || e.pointerId !== active.pointerId) return\n\t\t\tcore.emit('resize-cancel', { item: active.item, source: 'pointer' })\n\t\t\tresetResizeItem(active.item, active.pointerId, active.sizeLabel)\n\t\t\tactive = null\n\t\t\tcore.phase = 'selected'\n\t\t\tcore.interaction = null\n\t\t}\n\n\t\tconst onResizeDown = (e: PointerEvent) => {\n\t\t\tconst item = (e.target as HTMLElement).closest('[data-egg-item]') as HTMLElement | null\n\t\t\tif (!item) return\n\t\t\tconst handle = detectHandle(e, item)\n\t\t\tif (!handle) return\n\t\t\te.stopPropagation(); e.preventDefault()\n\t\t\tcore.select(item)\n\t\t\tconst { colspan, rowspan } = getItemSize(item)\n\t\t\tconst s = getComputedStyle(item)\n\t\t\tconst startCell = { column: parseInt(s.gridColumnStart, 10) || 1, row: parseInt(s.gridRowStart, 10) || 1 }\n\t\t\tconst initRect = item.getBoundingClientRect()\n\t\t\tlet sizeLabel: HTMLElement | null = null\n\t\t\tif (showSizeLabel) {\n\t\t\t\tsizeLabel = document.createElement('div')\n\t\t\t\tsizeLabel.className = 'egg-resize-label'\n\t\t\t\tsizeLabel.style.cssText = 'position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,.8);color:white;padding:4px 8px;border-radius:4px;font-size:14px;font-weight:600;font-family:system-ui,sans-serif;pointer-events:none;z-index:1000;white-space:nowrap'\n\t\t\t\tsizeLabel.textContent = `${colspan}\\u00d7${rowspan}`\n\t\t\t\titem.appendChild(sizeLabel)\n\t\t\t}\n\t\t\tactive = { item, pointerId: e.pointerId, handle, startCell, origSize: { colspan, rowspan }, curCell: { ...startCell }, curSize: { colspan, rowspan }, sizeLabel, initRect, startX: e.clientX, startY: e.clientY }\n\t\t\titem.setAttribute('data-egg-resizing', ''); item.setAttribute('data-egg-handle-active', handle); item.removeAttribute('data-egg-handle-hover')\n\t\t\titem.setPointerCapture(e.pointerId)\n\t\t\titem.addEventListener('pointermove', onResizePointerMove)\n\t\t\titem.addEventListener('pointerup', onResizePointerUp)\n\t\t\titem.addEventListener('pointercancel', onResizePointerCancel)\n\t\t\tcore.phase = 'interacting'\n\t\t\tcore.interaction = { type: 'resize', mode: 'pointer', itemId: getItemId(item), element: item, columnCount: core.getGridInfo().columns.length }\n\t\t\tcore.emit('resize-start', { item, cell: startCell, colspan, rowspan, handle, source: 'pointer' })\n\t\t\titem.style.position = 'fixed'; item.style.left = `${initRect.left}px`; item.style.top = `${initRect.top}px`\n\t\t\titem.style.width = `${initRect.width}px`; item.style.height = `${initRect.height}px`; item.style.zIndex = '100'\n\t\t\titem.style.viewTransitionName = 'resizing'\n\t\t}\n\n\t\tconst onResizeHover = (e: PointerEvent) => {\n\t\t\tif (active) return\n\t\t\tconst item = (e.target as HTMLElement).closest('[data-egg-item]') as HTMLElement | null\n\t\t\tif (item) {\n\t\t\t\tconst h = detectHandle(e, item)\n\t\t\t\tif (h !== hoveredHandle || item !== hoveredItem) {\n\t\t\t\t\tif (hoveredItem && hoveredItem !== item) { hoveredItem.style.cursor = ''; hoveredItem.removeAttribute('data-egg-handle-hover') }\n\t\t\t\t\tif (hoveredItem === item && hoveredHandle && !h) item.removeAttribute('data-egg-handle-hover')\n\t\t\t\t\thoveredItem = item; hoveredHandle = h\n\t\t\t\t\titem.style.cursor = (h ? CURSOR[h] : '') || ''\n\t\t\t\t\tif (h) item.setAttribute('data-egg-handle-hover', h); else item.removeAttribute('data-egg-handle-hover')\n\t\t\t\t}\n\t\t\t} else if (hoveredItem) { hoveredItem.style.cursor = ''; hoveredItem.removeAttribute('data-egg-handle-hover'); hoveredItem = null; hoveredHandle = null }\n\t\t}\n\n\t\tconst onResizeEsc = (e: KeyboardEvent) => { if (e.key === 'Escape' && active) { onResizePointerCancel(new PointerEvent('pointercancel', { pointerId: active.pointerId })) } }\n\n\t\telement.addEventListener('pointerdown', onResizeDown, { capture: true })\n\t\telement.addEventListener('pointermove', onResizeHover)\n\t\tdocument.addEventListener('keydown', onResizeEsc)\n\t\tcleanups.push(() => { element.removeEventListener('pointerdown', onResizeDown, { capture: true }); element.removeEventListener('pointermove', onResizeHover); document.removeEventListener('keydown', onResizeEsc) })\n\t}\n\n\t// ── Keyboard ───────────────────────────────────────────────────────────────\n\n\tif (options.keyboard !== false) {\n\t\tlet kbMode = false\n\t\tlet kbTargetCell: GridCell | null = null\n\t\tlet pendingVtnRestore: { item: HTMLElement; tid: number } | null = null\n\n\t\tconst KEY_DIR: Record<string, 'up' | 'down' | 'left' | 'right'> = { ArrowUp: 'up', ArrowDown: 'down', ArrowLeft: 'left', ArrowRight: 'right', k: 'up', K: 'up', j: 'down', J: 'down', h: 'left', H: 'left', l: 'right', L: 'right' }\n\t\tconst CODE_DIR: Record<string, 'up' | 'down' | 'left' | 'right'> = { KeyK: 'up', KeyJ: 'down', KeyH: 'left', KeyL: 'right' }\n\t\tconst getDir = (key: string, code: string) => KEY_DIR[key] ?? CODE_DIR[code] ?? null\n\n\t\tconst isHolding = () => core.phase === 'interacting' && core.interaction?.type === 'drag' && core.interaction.mode === 'keyboard'\n\t\tconst getHeldItem = () => isHolding() ? core.interaction!.element : null\n\n\t\tconst getAdjacentCell = (cell: GridCell, dir: string, amt = 1): GridCell => {\n\t\t\tif (dir === 'up') return { ...cell, row: Math.max(1, cell.row - amt) }\n\t\t\tif (dir === 'down') return { ...cell, row: cell.row + amt }\n\t\t\tif (dir === 'left') return { ...cell, column: Math.max(1, cell.column - amt) }\n\t\t\treturn { ...cell, column: cell.column + amt }\n\t\t}\n\n\t\tconst findItemInDir = (from: GridCell, dir: string, exclude: HTMLElement): HTMLElement | null => {\n\t\t\tconst items = Array.from(element.querySelectorAll('[data-egg-item]')) as HTMLElement[]\n\t\t\tlet best: HTMLElement | null = null, bestDist = Infinity\n\t\t\tfor (const item of items) {\n\t\t\t\tif (item === exclude) continue\n\t\t\t\tconst c = getItemCell(item)\n\t\t\t\tlet inDir = false, dist = 0\n\t\t\t\tif (dir === 'up') { inDir = c.row < from.row; dist = from.row - c.row + Math.abs(c.column - from.column) * 0.1 }\n\t\t\t\telse if (dir === 'down') { inDir = c.row > from.row; dist = c.row - from.row + Math.abs(c.column - from.column) * 0.1 }\n\t\t\t\telse if (dir === 'left') { inDir = c.column < from.column; dist = from.column - c.column + Math.abs(c.row - from.row) * 0.1 }\n\t\t\t\telse { inDir = c.column > from.column; dist = c.column - from.column + Math.abs(c.row - from.row) * 0.1 }\n\t\t\t\tif (inDir && dist < bestDist) { bestDist = dist; best = item }\n\t\t\t}\n\t\t\treturn best\n\t\t}\n\n\t\tconst onKeyDown = (e: KeyboardEvent) => {\n\t\t\tif (e.key === 'G' && e.shiftKey && !e.ctrlKey && !e.altKey && !e.metaKey) {\n\t\t\t\te.preventDefault()\n\t\t\t\tkbMode = !kbMode\n\t\t\t\tif (kbMode) {\n\t\t\t\t\telement.setAttribute('data-egg-keyboard-mode', '')\n\t\t\t\t\tif (!core.selectedItem) { const f = element.querySelector('[data-egg-item]') as HTMLElement | null; if (f) core.select(f) }\n\t\t\t\t} else element.removeAttribute('data-egg-keyboard-mode')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst focused = document.activeElement as HTMLElement | null\n\t\t\tif (!kbMode && !(focused && element.contains(focused)) && !core.selectedItem) return\n\t\t\tconst sel = core.selectedItem\n\t\t\tconst dir = getDir(e.key, e.code)\n\n\t\t\tif (e.key === 'Escape') {\n\t\t\t\te.preventDefault()\n\t\t\t\tconst held = getHeldItem()\n\t\t\t\tif (held) { held.removeAttribute('data-egg-dragging'); core.emit('drag-cancel', { item: held, source: 'keyboard' }); core.phase = 'selected'; core.interaction = null; kbTargetCell = null }\n\t\t\t\telse if (sel) core.deselect()\n\t\t\t\tif (kbMode) { kbMode = false; element.removeAttribute('data-egg-keyboard-mode') }\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (e.key === 'Enter' || e.key === ' ') {\n\t\t\t\tif (!sel) return; e.preventDefault()\n\t\t\t\tconst held = getHeldItem()\n\t\t\t\tif (held) {\n\t\t\t\t\tconst tc = kbTargetCell ?? getItemCell(held), sz = getItemSize(held)\n\t\t\t\t\theld.removeAttribute('data-egg-dragging')\n\t\t\t\t\tcore.emit('drag-end', { item: held, cell: tc, colspan: sz.colspan, rowspan: sz.rowspan, source: 'keyboard' })\n\t\t\t\t\tcore.phase = 'selected'; core.interaction = null; kbTargetCell = null\n\t\t\t\t} else {\n\t\t\t\t\tconst itemId = getItemId(sel), sz = getItemSize(sel), sc = getItemCell(sel)\n\t\t\t\t\tcore.phase = 'interacting'\n\t\t\t\t\tcore.interaction = { type: 'drag', mode: 'keyboard', itemId, element: sel, columnCount: core.getGridInfo().columns.length }\n\t\t\t\t\tkbTargetCell = sc\n\t\t\t\t\tsel.setAttribute('data-egg-dragging', '')\n\t\t\t\t\tcore.emit('drag-start', { item: sel, cell: sc, colspan: sz.colspan, rowspan: sz.rowspan, source: 'keyboard' })\n\t\t\t\t}\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (!dir) return\n\t\t\te.preventDefault()\n\n\t\t\tif (e.altKey && !e.ctrlKey && !e.shiftKey && sel) {\n\t\t\t\tconst adj = findItemInDir(getItemCell(sel), dir, sel)\n\t\t\t\tif (adj) core.select(adj)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (!sel) return\n\n\t\t\tconst cc = getItemCell(sel), sz = getItemSize(sel), gi = core.getGridInfo()\n\n\t\t\t// Shift+nav: resize\n\t\t\tif (e.shiftKey && !e.ctrlKey && !e.altKey) {\n\t\t\t\tlet nCS = sz.colspan, nRS = sz.rowspan\n\t\t\t\tif (dir === 'right') nCS = Math.min(sz.colspan + 1, gi.columns.length - cc.column + 1)\n\t\t\t\telse if (dir === 'left') nCS = Math.max(1, sz.colspan - 1)\n\t\t\t\telse if (dir === 'down') nRS = sz.rowspan + 1\n\t\t\t\telse nRS = Math.max(1, sz.rowspan - 1)\n\t\t\t\tif (nCS === sz.colspan && nRS === sz.rowspan) return\n\n\t\t\t\tif (pendingVtnRestore) { clearTimeout(pendingVtnRestore.tid); pendingVtnRestore.item.style.removeProperty('view-transition-name'); pendingVtnRestore = null }\n\t\t\t\tconst handle = dir === 'right' || dir === 'down' ? 'se' : dir === 'left' ? 'w' : 'n'\n\t\t\t\tcore.phase = 'interacting'\n\t\t\t\tcore.interaction = { type: 'resize', mode: 'keyboard', itemId: getItemId(sel), element: sel, columnCount: gi.columns.length }\n\t\t\t\t;(sel.style as any).viewTransitionName = 'resizing'\n\t\t\t\tcore.emit('resize-start', { item: sel, cell: cc, colspan: sz.colspan, rowspan: sz.rowspan, handle })\n\t\t\t\tsel.setAttribute('data-egg-colspan', String(nCS))\n\t\t\t\tsel.setAttribute('data-egg-rowspan', String(nRS))\n\t\t\t\tcore.emit('resize-end', { item: sel, cell: cc, colspan: nCS, rowspan: nRS })\n\t\t\t\tcore.phase = 'selected'; core.interaction = null\n\t\t\t\tconst itemToRestore = sel\n\t\t\t\tconst tid = window.setTimeout(() => { itemToRestore.style.removeProperty('view-transition-name'); if (pendingVtnRestore?.item === itemToRestore) pendingVtnRestore = null }, 250)\n\t\t\t\tpendingVtnRestore = { item: itemToRestore, tid }\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tlet amt = 1\n\t\t\tif (e.ctrlKey || e.metaKey) amt = (dir === 'up' || dir === 'down') ? sz.rowspan : sz.colspan\n\t\t\tconst rawCell = getAdjacentCell(cc, dir, amt)\n\t\t\tconst maxCol = Math.max(1, gi.columns.length - sz.colspan + 1)\n\t\t\tconst maxRow = Math.max(1, gi.rows.length - sz.rowspan + 1)\n\t\t\tconst tc = { column: Math.max(1, Math.min(maxCol, rawCell.column)), row: Math.max(1, Math.min(maxRow, rawCell.row)) }\n\t\t\tif (tc.column === cc.column && tc.row === cc.row) return\n\n\t\t\tconst held = getHeldItem()\n\t\t\tif (held) {\n\t\t\t\tkbTargetCell = tc\n\t\t\t\tcore.emit('drag-move', { item: held, cell: tc, x: 0, y: 0, colspan: sz.colspan, rowspan: sz.rowspan, source: 'keyboard' })\n\t\t\t} else {\n\t\t\t\tcore.emit('drag-start', { item: sel, cell: cc, colspan: sz.colspan, rowspan: sz.rowspan, source: 'keyboard' })\n\t\t\t\tcore.emit('drag-end', { item: sel, cell: tc, colspan: sz.colspan, rowspan: sz.rowspan, source: 'keyboard' })\n\t\t\t}\n\t\t}\n\n\t\tdocument.addEventListener('keydown', onKeyDown)\n\t\tcleanups.push(() => { document.removeEventListener('keydown', onKeyDown); element.removeAttribute('data-egg-keyboard-mode') })\n\t}\n\n\t// ── Algorithm Harness (unified drag + resize) ──────────────────────────────\n\n\tif (options.algorithm !== false) {\n\t\tconst algoType = options.algorithm ?? 'push'\n\t\tconst compact = options.compaction ?? true\n\t\tconst layoutModel = options.responsive?.layoutModel ?? options.layoutModel\n\n\t\tfunction getColumnCount(): number {\n\t\t\tconst s = getComputedStyle(element)\n\t\t\treturn Math.max(1, s.gridTemplateColumns.split(' ').filter(Boolean).length)\n\t\t}\n\n\t\t// Unified interaction state\n\t\tlet ix: {\n\t\t\ttype: 'drag' | 'resize'\n\t\t\titemId: string; element: HTMLElement; source: string\n\t\t\tcolumnCount: number\n\t\t\toriginals: Map<string, ItemRect>\n\t\t\tpendingCell: GridCell | null\n\t\t\tlastResize: { cell: GridCell; colspan: number; rowspan: number } | null\n\t\t\tlayout: ItemRect[] | null\n\t\t\tversion: number\n\t\t} | null = null\n\t\tlet layoutVersion = 0\n\n\t\tfunction calcLayout(items: ItemRect[], movedId: string, cell: GridCell, cols: number, colspan?: number, rowspan?: number): ItemRect[] {\n\t\t\tif (ix?.type === 'resize' && colspan != null && rowspan != null) {\n\t\t\t\tconst updated = items.map(i => i.id === movedId ? { ...i, column: cell.column, row: cell.row, width: colspan, height: rowspan } : i)\n\t\t\t\treturn calculatePushLayout(updated, movedId, cell, compact)\n\t\t\t}\n\t\t\treturn calculatePushLayout(items, movedId, cell, compact)\n\t\t}\n\n\t\tfunction getItemsWithOriginals(excludeId: string | null, originals: Map<string, ItemRect>): ItemRect[] {\n\t\t\treturn readItemsFromDOM(element).map(item => {\n\t\t\t\tconst orig = originals.get(item.id)\n\t\t\t\tif (orig && item.id !== excludeId) return { ...item, column: orig.column, row: orig.row }\n\t\t\t\treturn item\n\t\t\t})\n\t\t}\n\n\t\tfunction getResizeItems(originals: Map<string, ItemRect>, resizedId: string, cell: GridCell, colspan: number, rowspan: number): ItemRect[] {\n\t\t\tconst items: ItemRect[] = []\n\t\t\tfor (const [id, o] of originals) {\n\t\t\t\tif (id === resizedId) items.push({ id, column: cell.column, row: cell.row, width: colspan, height: rowspan })\n\t\t\t\telse items.push({ ...o })\n\t\t\t}\n\t\t\treturn items\n\t\t}\n\n\t\tfunction applyLayout(layout: ItemRect[], excludeId: string | null, useVT: boolean, onApplied?: () => void) {\n\t\t\tconst v = ++layoutVersion\n\t\t\tif (ix) { ix.layout = layout; ix.version = v }\n\n\t\t\tconst doApply = () => {\n\t\t\t\tif (v !== layoutVersion) return\n\t\t\t\tcore.previewCSS = layoutToCSS(layout, { excludeId: excludeId ?? undefined, maxColumns: ix?.columnCount })\n\t\t\t\tcore.commitStyles()\n\t\t\t\tconst els = element.querySelectorAll('[data-egg-item]')\n\t\t\t\tfor (const el of els) {\n\t\t\t\t\tconst e = el as HTMLElement\n\t\t\t\t\tconst id = getItemId(e)\n\t\t\t\t\tif (id !== excludeId && e.style.viewTransitionName !== 'none') {\n\t\t\t\t\t\te.style.gridColumn = ''; e.style.gridRow = ''\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tonApplied?.()\n\t\t\t}\n\n\t\t\tif (useVT && 'startViewTransition' in document) {\n\t\t\t\tif (ix?.type === 'drag' && ix.element) ix.element.style.viewTransitionName = 'dragging'\n\t\t\t\t;(document as any).startViewTransition(doApply)\n\t\t\t} else doApply()\n\t\t}\n\n\t\tfunction saveAndClear(layout: ItemRect[], cols: number, afterSave?: () => void) {\n\t\t\tif (!layoutModel || !cols) return\n\t\t\tconst positions = new Map<string, { column: number; row: number }>()\n\t\t\tfor (const item of layout) positions.set(item.id, { column: item.column, row: item.row })\n\t\t\tlayoutModel.saveLayout(cols, positions)\n\t\t\tafterSave?.()\n\t\t\tcore.previewCSS = ''\n\t\t\tcore.commitStyles()\n\t\t\tcore.emit('layout-change', { items: layout, columnCount: cols })\n\t\t}\n\n\t\t// Event handlers\n\t\tconst onStart = (e: Event) => {\n\t\t\tconst detail = (e as CustomEvent).detail\n\t\t\tconst isDrag = e.type === 'egg-drag-start'\n\t\t\tconst itemId = getItemId(detail.item)\n\t\t\tconst items = readItemsFromDOM(element)\n\t\t\tconst originals = new Map<string, ItemRect>()\n\t\t\tfor (const i of items) originals.set(i.id, { ...i })\n\n\t\t\tix = {\n\t\t\t\ttype: isDrag ? 'drag' : 'resize', itemId, element: detail.item, source: detail.source,\n\t\t\t\tcolumnCount: getColumnCount(), originals, pendingCell: null, lastResize: null, layout: null, version: 0,\n\t\t\t}\n\n\t\t\t// Clear inline styles so CSS injection takes effect\n\t\t\tconst els = element.querySelectorAll('[data-egg-item]')\n\t\t\tfor (const el of els) {\n\t\t\t\tconst e = el as HTMLElement\n\t\t\t\tif (e !== detail.item) { e.style.gridColumn = ''; e.style.gridRow = '' }\n\t\t\t}\n\t\t\tcore.previewCSS = layoutToCSS(items, { maxColumns: ix.columnCount })\n\t\t\tcore.commitStyles()\n\t\t}\n\n\t\tconst onMove = (e: Event) => {\n\t\t\tif (!ix) return\n\t\t\tconst detail = (e as CustomEvent).detail\n\n\t\t\tif (ix.type === 'drag') {\n\t\t\t\tif (core.cameraScrolling) { ix.pendingCell = detail.cell; return }\n\t\t\t\tix.pendingCell = null\n\t\t\t\tconst items = getItemsWithOriginals(ix.itemId, ix.originals)\n\t\t\t\tconst layout = calcLayout(items, ix.itemId, detail.cell, ix.columnCount)\n\t\t\t\tapplyLayout(layout, ix.itemId, true)\n\t\t\t} else {\n\t\t\t\t// Resize move — deduplicate\n\t\t\t\tconst { cell, colspan, rowspan } = detail\n\t\t\t\tif (ix.lastResize && ix.lastResize.cell.column === cell.column && ix.lastResize.cell.row === cell.row && ix.lastResize.colspan === colspan && ix.lastResize.rowspan === rowspan) return\n\t\t\t\tix.lastResize = { cell: { ...cell }, colspan, rowspan }\n\t\t\t\tconst items = getResizeItems(ix.originals, ix.itemId, cell, colspan, rowspan)\n\t\t\t\tconst layout = calcLayout(items, ix.itemId, cell, ix.columnCount, colspan, rowspan)\n\t\t\t\tapplyLayout(layout, ix.itemId, true)\n\t\t\t}\n\t\t}\n\n\t\tconst onEnd = (e: Event) => {\n\t\t\tif (!ix) return\n\t\t\tconst detail = (e as CustomEvent).detail\n\t\t\tconst savedIx = ix\n\n\t\t\tif (savedIx.element.style.viewTransitionName === 'dragging') savedIx.element.style.viewTransitionName = ''\n\t\t\tconst useVT = savedIx.source !== 'pointer'\n\n\t\t\tlet finalLayout: ItemRect[]\n\t\t\tif (savedIx.type === 'drag') {\n\t\t\t\tconst items = getItemsWithOriginals(savedIx.itemId, savedIx.originals)\n\t\t\t\tfinalLayout = calcLayout(items, savedIx.itemId, detail.cell, savedIx.columnCount)\n\t\t\t} else {\n\t\t\t\tconst items = getResizeItems(savedIx.originals, savedIx.itemId, detail.cell, detail.colspan, detail.rowspan)\n\t\t\t\tfinalLayout = calcLayout(items, savedIx.itemId, detail.cell, savedIx.columnCount, detail.colspan, detail.rowspan)\n\t\t\t}\n\n\t\t\tconst savedCols = savedIx.columnCount\n\t\t\tconst isResize = savedIx.type === 'resize'\n\t\t\tconst savedItemId = savedIx.itemId\n\n\t\t\tapplyLayout(finalLayout, null, useVT, () =>\n\t\t\t\tsaveAndClear(finalLayout, savedCols, isResize ? () => layoutModel?.updateItemSize(savedItemId, { width: detail.colspan, height: detail.rowspan }) : undefined),\n\t\t\t)\n\t\t\tix = null\n\t\t}\n\n\t\tconst onCancel = () => {\n\t\t\tif (!ix) return\n\t\t\tconst restoreLayout = Array.from(ix.originals.values())\n\t\t\tconst restore = () => applyLayout(restoreLayout, null, false)\n\t\t\tif ('startViewTransition' in document) (document as any).startViewTransition(restore)\n\t\t\telse restore()\n\t\t\tix = null\n\t\t}\n\n\t\tconst onCameraSettled = () => {\n\t\t\tif (!ix || ix.type !== 'drag') return\n\t\t\tlet cell = ix.pendingCell\n\t\t\tif (!cell && ix.element) {\n\t\t\t\tconst r = ix.element.getBoundingClientRect()\n\t\t\t\tcell = core.getCellFromPoint(r.left + r.width / 2, r.top + r.height / 2)\n\t\t\t}\n\t\t\tif (!cell) return\n\t\t\tix.pendingCell = null\n\t\t\tconst items = getItemsWithOriginals(ix.itemId, ix.originals)\n\t\t\tconst layout = calcLayout(items, ix.itemId, cell, ix.columnCount)\n\t\t\tapplyLayout(layout, ix.itemId, true)\n\t\t}\n\n\t\tconst events: Record<string, EventListener> = {\n\t\t\t'egg-drag-start': onStart, 'egg-drag-move': onMove, 'egg-drag-end': onEnd, 'egg-drag-cancel': onCancel,\n\t\t\t'egg-resize-start': onStart, 'egg-resize-move': onMove, 'egg-resize-end': onEnd, 'egg-resize-cancel': onCancel,\n\t\t\t'egg-camera-settled': onCameraSettled,\n\t\t}\n\t\tfor (const [name, handler] of Object.entries(events)) element.addEventListener(name, handler)\n\t\tcleanups.push(() => { for (const [name, handler] of Object.entries(events)) element.removeEventListener(name, handler) })\n\t}\n\n\t// ── Camera ─────────────────────────────────────────────────────────────────\n\n\tif (options.camera !== false) {\n\t\tconst camOpts = typeof options.camera === 'object' ? options.camera : {}\n\t\tconst edgeSize = camOpts.edgeSize ?? 60\n\t\tconst scrollSpeed = camOpts.scrollSpeed ?? 15\n\t\tconst settleDelay = camOpts.settleDelay ?? 150\n\n\t\tlet scrollContainer: HTMLElement | Window = window\n\t\tlet p = element.parentElement\n\t\twhile (p) {\n\t\t\tconst s = getComputedStyle(p)\n\t\t\tif (s.overflowY === 'auto' || s.overflowY === 'scroll' || s.overflowX === 'auto' || s.overflowX === 'scroll') { scrollContainer = p; break }\n\t\t\tp = p.parentElement\n\t\t}\n\n\t\tlet isDragging = false, dragSrc: string | null = null\n\t\tlet lastPX = 0, lastPY = 0\n\t\tlet rafId: number | null = null, settleId: ReturnType<typeof setTimeout> | null = null\n\t\tlet wasScrolling = false\n\n\t\tfunction setScrolling(active: boolean) {\n\t\t\tif (active) {\n\t\t\t\tcore.cameraScrolling = true\n\t\t\t\tif (settleId) { clearTimeout(settleId); settleId = null }\n\t\t\t} else {\n\t\t\t\tif (settleId) clearTimeout(settleId)\n\t\t\t\tsettleId = setTimeout(() => {\n\t\t\t\t\tcore.cameraScrolling = false; settleId = null\n\t\t\t\t\telement.dispatchEvent(new CustomEvent('egg-camera-settled', { bubbles: true }))\n\t\t\t\t}, settleDelay)\n\t\t\t}\n\t\t}\n\n\t\tfunction scrollLoop() {\n\t\t\tif (!isDragging) { rafId = null; if (wasScrolling) { setScrolling(false); wasScrolling = false }; return }\n\t\t\tconst vp = scrollContainer === window\n\t\t\t\t? { top: 0, left: 0, width: window.innerWidth, height: window.innerHeight }\n\t\t\t\t: (() => { const r = (scrollContainer as HTMLElement).getBoundingClientRect(); return { top: r.top, left: r.left, width: r.width, height: r.height } })()\n\t\t\tconst rx = lastPX - vp.left, ry = lastPY - vp.top\n\t\t\tlet vx = 0, vy = 0\n\t\t\tif (rx < edgeSize) vx = -scrollSpeed * (1 - rx / edgeSize)\n\t\t\telse if (rx > vp.width - edgeSize) vx = scrollSpeed * (1 - (vp.width - rx) / edgeSize)\n\t\t\tif (ry < edgeSize) vy = -scrollSpeed * (1 - ry / edgeSize)\n\t\t\telse if (ry > vp.height - edgeSize) vy = scrollSpeed * (1 - (vp.height - ry) / edgeSize)\n\n\t\t\tif (vx || vy) {\n\t\t\t\tif (!wasScrolling) setScrolling(true)\n\t\t\t\twasScrolling = true\n\t\t\t\tif (scrollContainer === window) window.scrollBy(vx, vy)\n\t\t\t\telse { (scrollContainer as HTMLElement).scrollLeft += vx; (scrollContainer as HTMLElement).scrollTop += vy }\n\t\t\t} else if (wasScrolling) { setScrolling(false); wasScrolling = false }\n\t\t\trafId = requestAnimationFrame(scrollLoop)\n\t\t}\n\n\t\tconst onCamPtrMove = (e: PointerEvent) => { if (!isDragging) return; lastPX = e.clientX; lastPY = e.clientY; if (rafId === null) rafId = requestAnimationFrame(scrollLoop) }\n\t\tconst stopLoop = () => { if (rafId !== null) { cancelAnimationFrame(rafId); rafId = null }; setScrolling(false) }\n\n\t\tconst camEvents: Record<string, EventListener> = {\n\t\t\t'egg-drag-start': ((e: CustomEvent) => { isDragging = true; dragSrc = e.detail.source; if (dragSrc === 'pointer') window.addEventListener('pointermove', onCamPtrMove) }) as EventListener,\n\t\t\t'egg-drag-move': ((e: CustomEvent) => { if (e.detail.source === 'pointer') { lastPX = e.detail.x; lastPY = e.detail.y } else requestAnimationFrame(() => e.detail.item.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'nearest' })) }) as EventListener,\n\t\t\t'egg-drag-end': ((e: CustomEvent) => { const wp = dragSrc === 'pointer'; isDragging = false; dragSrc = null; stopLoop(); if (wp) window.removeEventListener('pointermove', onCamPtrMove); if (!wp) setTimeout(() => requestAnimationFrame(() => e.detail.item.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'nearest' })), 100) }) as EventListener,\n\t\t\t'egg-drag-cancel': (() => { const wp = dragSrc === 'pointer'; isDragging = false; dragSrc = null; stopLoop(); if (wp) window.removeEventListener('pointermove', onCamPtrMove) }) as EventListener,\n\t\t\t'egg-select': ((e: CustomEvent) => { if (!isDragging) e.detail.item.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'nearest' }) }) as EventListener,\n\t\t}\n\t\tfor (const [name, handler] of Object.entries(camEvents)) element.addEventListener(name, handler)\n\t\tcleanups.push(() => { stopLoop(); for (const [name, handler] of Object.entries(camEvents)) element.removeEventListener(name, handler) })\n\t}\n\n\t// ── Placeholder ────────────────────────────────────────────────────────────\n\n\tif (options.placeholder !== false) {\n\t\tconst phOpts = typeof options.placeholder === 'object' ? options.placeholder : {}\n\t\tconst className = phOpts.className ?? 'egg-placeholder'\n\t\tlet ph: HTMLElement | null = null\n\n\t\tfunction createPH() { if (ph) return; ph = document.createElement('div'); ph.className = className; ph.style.pointerEvents = 'none'; ph.style.viewTransitionName = 'none'; element.appendChild(ph) }\n\t\tfunction updatePH(c: number, r: number, cs: number, rs: number) { if (!ph) return; ph.style.gridColumn = `${c} / span ${cs}`; ph.style.gridRow = `${r} / span ${rs}` }\n\t\tfunction removePH() { if (ph) { ph.remove(); ph = null } }\n\n\t\tconst phEvents: Record<string, EventListener> = {\n\t\t\t'egg-drag-start': ((e: CustomEvent) => { createPH(); updatePH(e.detail.cell.column, e.detail.cell.row, e.detail.colspan, e.detail.rowspan) }) as EventListener,\n\t\t\t'egg-drag-move': ((e: CustomEvent) => { updatePH(e.detail.cell.column, e.detail.cell.row, e.detail.colspan, e.detail.rowspan) }) as EventListener,\n\t\t\t'egg-drop-preview': ((e: CustomEvent) => { updatePH(e.detail.cell.column, e.detail.cell.row, e.detail.colspan, e.detail.rowspan) }) as EventListener,\n\t\t\t'egg-drag-end': (() => removePH()) as EventListener,\n\t\t\t'egg-drag-cancel': (() => removePH()) as EventListener,\n\t\t\t'egg-resize-start': ((e: CustomEvent) => { createPH(); updatePH(e.detail.cell.column, e.detail.cell.row, e.detail.colspan, e.detail.rowspan) }) as EventListener,\n\t\t\t'egg-resize-move': ((e: CustomEvent) => { updatePH(e.detail.cell.column, e.detail.cell.row, e.detail.colspan, e.detail.rowspan) }) as EventListener,\n\t\t\t'egg-resize-end': (() => removePH()) as EventListener,\n\t\t\t'egg-resize-cancel': (() => removePH()) as EventListener,\n\t\t}\n\t\tfor (const [name, handler] of Object.entries(phEvents)) element.addEventListener(name, handler)\n\t\tdocument.addEventListener('pointerup', () => requestAnimationFrame(() => { if (ph && !document.querySelector('[data-egg-dragging]') && !document.querySelector('[data-egg-resizing]')) removePH() }))\n\t\tcleanups.push(() => { removePH(); for (const [name, handler] of Object.entries(phEvents)) element.removeEventListener(name, handler) })\n\t}\n\n\t// ── Accessibility ──────────────────────────────────────────────────────────\n\n\tif (options.accessibility !== false) {\n\t\tconst live = document.createElement('div')\n\t\tlive.setAttribute('aria-live', 'assertive'); live.setAttribute('aria-atomic', 'true')\n\t\tObject.assign(live.style, { position: 'absolute', width: '1px', height: '1px', padding: '0', margin: '-1px', overflow: 'hidden', clip: 'rect(0,0,0,0)', whiteSpace: 'nowrap', border: '0' })\n\t\telement.appendChild(live)\n\t\tlet lastA11yCell: GridCell | null = null, lastA11ySize: { colspan: number; rowspan: number } | null = null\n\n\t\tfunction announce(msg: string) { live.textContent = ''; requestAnimationFrame(() => { live.textContent = msg }) }\n\t\tfunction label(item: HTMLElement) { return item.getAttribute('data-egg-label') || item.getAttribute('aria-label') || item.id || 'Item' }\n\t\tfunction pos(cell: GridCell) { return `row ${cell.row}, column ${cell.column}` }\n\t\tfunction tpl(item: HTMLElement, event: string, vars: Record<string, string>, fallback: string): string {\n\t\t\tconst t = item.getAttribute(`data-egg-announce-${event}`) || element.getAttribute(`data-egg-announce-${event}`)\n\t\t\treturn t ? t.replace(/\\{(\\w+)\\}/g, (_, k) => vars[k] ?? '') : fallback\n\t\t}\n\n\t\tconst a11yEvents: Record<string, EventListener> = {\n\t\t\t'egg-drag-start': ((e: CustomEvent) => { lastA11yCell = e.detail.cell; const l = label(e.detail.item), p = pos(e.detail.cell); announce(tpl(e.detail.item, 'grab', { label: l, row: String(e.detail.cell.row), column: String(e.detail.cell.column) }, `${l} grabbed. Position ${p}. Use arrow keys to move, Enter to drop, Escape to cancel.`)) }) as EventListener,\n\t\t\t'egg-drag-move': ((e: CustomEvent) => { const c = e.detail.cell; if (lastA11yCell && c.row === lastA11yCell.row && c.column === lastA11yCell.column) return; lastA11yCell = c; announce(tpl(e.detail.item, 'move', { label: label(e.detail.item), row: String(c.row), column: String(c.column) }, `Moved to ${pos(c)}.`)) }) as EventListener,\n\t\t\t'egg-drag-end': ((e: CustomEvent) => { lastA11yCell = null; const l = label(e.detail.item), p = pos(e.detail.cell); announce(tpl(e.detail.item, 'drop', { label: l, row: String(e.detail.cell.row), column: String(e.detail.cell.column) }, `${l} dropped at ${p}.`)) }) as EventListener,\n\t\t\t'egg-drag-cancel': ((e: CustomEvent) => { lastA11yCell = null; announce(tpl(e.detail.item, 'cancel', { label: label(e.detail.item) }, `${label(e.detail.item)} drag cancelled.`)) }) as EventListener,\n\t\t\t'egg-resize-start': ((e: CustomEvent) => { lastA11ySize = { colspan: e.detail.colspan, rowspan: e.detail.rowspan }; const sz = `${e.detail.colspan} columns by ${e.detail.rowspan} rows`; announce(tpl(e.detail.item, 'resize-start', { label: label(e.detail.item), colspan: String(e.detail.colspan), rowspan: String(e.detail.rowspan) }, `${label(e.detail.item)} resize started. Size ${sz}.`)) }) as EventListener,\n\t\t\t'egg-resize-move': ((e: CustomEvent) => { if (lastA11ySize && e.detail.colspan === lastA11ySize.colspan && e.detail.rowspan === lastA11ySize.rowspan) return; lastA11ySize = { colspan: e.detail.colspan, rowspan: e.detail.rowspan }; announce(tpl(e.detail.item, 'resize-move', { label: label(e.detail.item), colspan: String(e.detail.colspan), rowspan: String(e.detail.rowspan) }, `Resized to ${e.detail.colspan} columns by ${e.detail.rowspan} rows.`)) }) as EventListener,\n\t\t\t'egg-resize-end': ((e: CustomEvent) => { lastA11ySize = null; const sz = `${e.detail.colspan} columns by ${e.detail.rowspan} rows`; announce(tpl(e.detail.item, 'resize-end', { label: label(e.detail.item), colspan: String(e.detail.colspan), rowspan: String(e.detail.rowspan), row: String(e.detail.cell.row), column: String(e.detail.cell.column) }, `${label(e.detail.item)} resized to ${sz} at ${pos(e.detail.cell)}.`)) }) as EventListener,\n\t\t\t'egg-resize-cancel': ((e: CustomEvent) => { lastA11ySize = null; announce(tpl(e.detail.item, 'resize-cancel', { label: label(e.detail.item) }, `${label(e.detail.item)} resize cancelled.`)) }) as EventListener,\n\t\t}\n\t\tfor (const [name, handler] of Object.entries(a11yEvents)) element.addEventListener(name, handler)\n\t\tcleanups.push(() => { live.remove(); for (const [name, handler] of Object.entries(a11yEvents)) element.removeEventListener(name, handler) })\n\t}\n\n\t// ── Responsive ─────────────────────────────────────────────────────────────\n\n\tif (options.responsive) {\n\t\tconst { layoutModel } = options.responsive\n\t\tlet cellSize = options.responsive.cellSize\n\t\tlet gap = options.responsive.gap\n\n\t\tfunction inferMetrics() {\n\t\t\tif (cellSize !== undefined && gap !== undefined) return\n\t\t\tconst s = getComputedStyle(element)\n\t\t\tif (gap === undefined) gap = parseFloat(s.columnGap) || parseFloat(s.gap) || 16\n\t\t\tif (cellSize === undefined) { const ar = parseFloat(s.gridAutoRows); cellSize = ar > 0 ? ar : parseFloat(s.gridTemplateColumns.split(' ')[0] ?? '184') || 184 }\n\t\t}\n\n\t\tfunction injectCSS() {\n\t\t\tinferMetrics()\n\t\t\tconst gridSelector = element.id ? `#${element.id}` : element.className ? `.${element.className.split(' ')[0]}` : '.grid'\n\t\t\tcore.baseCSS = layoutModel.generateAllBreakpointCSS({ cellSize: cellSize!, gap: gap!, gridSelector })\n\t\t\tcore.commitStyles()\n\t\t}\n\n\t\tif (!core.baseCSS.trim()) injectCSS()\n\t\tconst unsub = layoutModel.subscribe(() => injectCSS())\n\n\t\tlet lastColCount = layoutModel.currentColumnCount\n\t\tconst ro = new ResizeObserver(() => {\n\t\t\tconst s = getComputedStyle(element)\n\t\t\tconst newCount = Math.max(1, s.gridTemplateColumns.split(' ').filter(Boolean).length)\n\t\t\tif (newCount !== lastColCount) {\n\t\t\t\tconst prev = lastColCount; lastColCount = newCount\n\t\t\t\tlayoutModel.setCurrentColumnCount(newCount)\n\t\t\t\telement.dispatchEvent(new CustomEvent('egg-column-count-change', { bubbles: true, detail: { previousCount: prev, currentCount: newCount } }))\n\t\t\t}\n\t\t})\n\t\tro.observe(element)\n\t\tcleanups.push(() => { ro.disconnect(); unsub() })\n\t}\n\n\t// Snapshot initial layout from inline styles → CSS, then clear inline styles\n\t// so CSS injection controls layout from here on. Skip if responsive plugin\n\t// already injected CSS (it writes to baseCSS).\n\tif (!options.responsive && !core.baseCSS) {\n\t\tconst items = readItemsFromDOM(element)\n\t\tcore.baseCSS = layoutToCSS(items)\n\t\tcore.commitStyles()\n\t\telement.querySelectorAll('[data-egg-item]').forEach(el => {\n\t\t\t(el as HTMLElement).style.removeProperty('grid-column');\n\t\t\t(el as HTMLElement).style.removeProperty('grid-row')\n\t\t})\n\t}\n\n\treturn core\n}\n\n// ── Exports ────────────────────────────────────────────────────────────────────\n\nexport { getItemCell, getItemSize, getItemId, layoutToCSS, readItemsFromDOM }\nexport { calculatePushLayout, itemsOverlap, pushDown, compactUp }\nexport type { GridCell, ItemRect, ResizeHandle, EggCore, InitOptions, ResponsiveLayoutModel }\n"],"mappings":"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"}