function e(e,t){switch(t.type){case`SELECT`:return e.phase!==`idle`&&e.phase!==`selected`?e:{...e,phase:`selected`,selectedItemId:t.itemId};case`DESELECT`:return e.phase===`selected`?{...e,phase:`idle`,selectedItemId:null}:e;case`START_INTERACTION`:return e.phase===`selected`?{...e,phase:`interacting`,interaction:t.context}:e;case`COMMIT_INTERACTION`:return e.phase===`interacting`?{...e,phase:`committing`}:e;case`CANCEL_INTERACTION`:return e.phase===`interacting`?{...e,phase:`selected`,interaction:null}:e;case`FINISH_COMMIT`:return e.phase===`committing`?{...e,phase:`selected`,interaction:null}:e;default:return e}}function t(){let t={phase:`idle`,selectedItemId:null,interaction:null};return{getState(){return t},transition(n){let r=e(t,n);return r!==t&&(t=r),t}}}function n(e){return(e.phase===`interacting`||e.phase===`committing`)&&e.interaction?.type===`drag`}function r(e,t,n={}){let{duration:r=200,easing:i=`cubic-bezier(0.2, 0, 0, 1)`,onStart:a,onFinish:o}=n,s=e.getBoundingClientRect(),c=t.left-s.left,l=t.top-s.top;if(Math.abs(c)<=1&&Math.abs(l)<=1)return o?.(),null;a?.();let u=[{transform:`translate(${c}px, ${l}px)`},{transform:`translate(0, 0)`}],d=e.animate(u,{duration:r,easing:i});return d.onfinish=()=>o?.(),d}function i(e){return e.style.getPropertyValue(`--item-id`)||e.id||e.dataset.id||null}function a(e,t,n={}){let{attributeName:a=`data-gridiot-dropping`,...o}=n;e.style.viewTransitionName=`none`;let s=r(e,t,{...o,onStart:()=>{e.setAttribute(a,``),o.onStart?.()},onFinish:()=>{e.removeAttribute(a);let t=i(e);t&&(e.style.viewTransitionName=t),o.onFinish?.()}});if(!s){let t=i(e);t&&(e.style.viewTransitionName=t)}return s}var o=.4,s=40,c=5,l=30,u=.5;function d(e){let t=null,n=null,r=(r,i)=>{let{item:a,pointerId:o,rect:s,startCell:c,colspan:l,rowspan:u}=r;n={item:a,pointerId:o,offsetX:i.clientX-s.left,offsetY:i.clientY-s.top,initialRect:s,startCell:c,lastCell:c,lastTargetChangeTime:0,colspan:l,rowspan:u,dragStartX:i.clientX,dragStartY:i.clientY},a.setAttribute(`data-gridiot-dragging`,``),document.body.classList.add(`is-dragging`);let d=a.id||a.getAttribute(`data-gridiot-item`)||``;e.stateMachine.transition({type:`START_INTERACTION`,context:{type:`drag`,mode:`pointer`,itemId:d,element:a,columnCount:e.getGridInfo().columns.length}}),e.emit(`drag-start`,{item:a,cell:c,colspan:l,rowspan:u,source:`pointer`}),a.style.position=`fixed`,a.style.left=`${s.left}px`,a.style.top=`${s.top}px`,a.style.width=`${s.width}px`,a.style.height=`${s.height}px`,a.style.zIndex=`100`,t=null},i=n=>{let r=n.target.closest(`[data-gridiot-item]`);if(!r)return;e.select(r),n.preventDefault();let i=r.getBoundingClientRect(),a=V(r),{colspan:o,rowspan:s}=H(r);t={item:r,pointerId:n.pointerId,startX:n.clientX,startY:n.clientY,rect:i,startCell:a,colspan:o,rowspan:s},r.setPointerCapture(n.pointerId),r.addEventListener(`pointermove`,d),r.addEventListener(`pointerup`,f),r.addEventListener(`pointercancel`,p)},d=i=>{if(t&&!n){let e=i.clientX-t.startX,n=i.clientY-t.startY;if(Math.sqrt(e*e+n*n)>=c)r(t,i);else return}if(!n)return;let{item:a,offsetX:d,offsetY:f,initialRect:p,colspan:m,rowspan:h}=n,g=i.clientX-d,_=i.clientY-f;a.style.left=`${g}px`,a.style.top=`${_}px`;let v=g+p.width/2,y=_+p.height/2,b=e.getGridInfo(),x=i.clientX-n.dragStartX,S=i.clientY-n.dragStartY;if(Math.abs(x)>l){let e=u*(b.cellWidth+b.gap);v+=Math.sign(x)*e}if(Math.abs(S)>l){let e=u*(b.cellHeight+b.gap);y+=Math.sign(S)*e}let C=e.getCellFromPoint(v,y);if(C){let t=e.getGridInfo(),r=Math.max(1,t.columns.length-m+1),c=Math.max(1,t.rows.length-h+1),l={column:Math.max(1,Math.min(r,C.column)),row:Math.max(1,Math.min(c,C.row))},u=performance.now(),d=u-n.lastTargetChangeTime;if((l.column!==n.lastCell.column||l.row!==n.lastCell.row)&&d>=s){let r=t.cellWidth+t.gap,s=t.cellHeight+t.gap,c=t.rect.left+(n.lastCell.column-1)*r+t.cellWidth/2,d=t.rect.top+(n.lastCell.row-1)*s+t.cellHeight/2,f=(v-c)/r,p=(y-d)/s,g=l.column>n.lastCell.column,_=l.row>n.lastCell.row,b=f>0,x=p>0,S=g&&b||!g&&!b,C=_&&x||!_&&!x,w=S?.5:.5+o,T=C?.5:.5+o;if(Math.abs(f)<w&&Math.abs(p)<T)return;n.lastCell=l,n.lastTargetChangeTime=u,e.emit(`drag-move`,{item:a,cell:l,x:i.clientX,y:i.clientY,colspan:m,rowspan:h,source:`pointer`})}}},f=r=>{let i=t?.item||n?.item;if(!i)return;if(t&&!n){m(i,t.pointerId),t=null;return}if(!n)return;let{initialRect:o,colspan:s,rowspan:c,lastCell:d,offsetX:f,offsetY:p,dragStartX:g,dragStartY:_}=n,v=e.getGridInfo(),y=r.clientX-g,b=r.clientY-_,x=r.clientX-f,S=r.clientY-p,C=x+o.width/2,w=S+o.height/2;if(Math.abs(y)>l){let e=u*(v.cellWidth+v.gap);C+=Math.sign(y)*e}if(Math.abs(b)>l){let e=u*(v.cellHeight+v.gap);w+=Math.sign(b)*e}let T=e.getCellFromPoint(C,w),E=i.getBoundingClientRect();if(e.stateMachine.transition({type:`COMMIT_INTERACTION`}),T){let t=Math.max(1,v.columns.length-s+1),n=Math.max(1,v.rows.length-c+1),r={column:Math.max(1,Math.min(t,T.column)),row:Math.max(1,Math.min(n,T.row))};e.emit(`drag-end`,{item:i,cell:r,colspan:s,rowspan:c,source:`pointer`})}else e.emit(`drag-end`,{item:i,cell:d,colspan:s,rowspan:c,source:`pointer`});h(),e.stateMachine.transition({type:`FINISH_COMMIT`}),requestAnimationFrame(()=>{a(i,E)})},p=()=>{let r=t?.item||n?.item;r&&(n&&(e.emit(`drag-cancel`,{item:r,source:`pointer`}),e.stateMachine.transition({type:`CANCEL_INTERACTION`})),h())},m=(e,t)=>{e.releasePointerCapture(t),e.removeEventListener(`pointermove`,d),e.removeEventListener(`pointerup`,f),e.removeEventListener(`pointercancel`,p)},h=()=>{if(n){let{item:e,pointerId:t}=n;e.removeAttribute(`data-gridiot-dragging`),document.body.classList.remove(`is-dragging`),e.style.position=``,e.style.left=``,e.style.top=``,e.style.width=``,e.style.height=``,e.style.zIndex=``,m(e,t),n=null}t&&=(m(t.item,t.pointerId),null)},g=t=>{e.element.contains(t.target)||n||e.deselect()};return e.element.addEventListener(`pointerdown`,i),document.addEventListener(`pointerdown`,g),()=>{e.element.removeEventListener(`pointerdown`,i),document.removeEventListener(`pointerdown`,g),h()}}function f(e){let{stateMachine:t}=e,r=!1,i=null,a=null,o=()=>e.getGridInfo().columns.length,s=()=>{let e=t.getState();return n(e)&&e.interaction?.mode===`keyboard`?e.interaction.element:null},c={ArrowUp:`up`,ArrowDown:`down`,ArrowLeft:`left`,ArrowRight:`right`,k:`up`,K:`up`,j:`down`,J:`down`,h:`left`,H:`left`,l:`right`,L:`right`},l={KeyK:`up`,KeyJ:`down`,KeyH:`left`,KeyL:`right`},u=(e,t)=>c[e]??l[t]??null,d=(e,t,n=1)=>{switch(t){case`up`:return{...e,row:Math.max(1,e.row-n)};case`down`:return{...e,row:e.row+n};case`left`:return{...e,column:Math.max(1,e.column-n)};case`right`:return{...e,column:e.column+n}}},f=(t,n,r)=>{let i=Array.from(e.element.querySelectorAll(`[data-gridiot-item]`)),a=null,o=1/0;for(let e of i){if(e===r)continue;let i=V(e),s,c;switch(n){case`up`:c=i.row<t.row,s=t.row-i.row+Math.abs(i.column-t.column)*.1;break;case`down`:c=i.row>t.row,s=i.row-t.row+Math.abs(i.column-t.column)*.1;break;case`left`:c=i.column<t.column,s=t.column-i.column+Math.abs(i.row-t.row)*.1;break;case`right`:c=i.column>t.column,s=i.column-t.column+Math.abs(i.row-t.row)*.1;break}c&&s<o&&(o=s,a=e)}return a},p=n=>{if(n.key===`G`&&n.shiftKey&&!n.ctrlKey&&!n.altKey&&!n.metaKey){if(n.preventDefault(),r=!r,r){if(e.element.setAttribute(`data-gridiot-keyboard-mode`,``),!e.selectedItem){let t=e.element.querySelector(`[data-gridiot-item]`);t&&e.select(t)}}else e.element.removeAttribute(`data-gridiot-keyboard-mode`);return}let c=document.activeElement,l=c&&e.element.contains(c),p=e.selectedItem!==null;if(!r&&!l&&!p)return;let m=e.selectedItem,h=u(n.key,n.code);if(n.key===`Escape`){n.preventDefault();let a=s();a?(a.removeAttribute(`data-gridiot-dragging`),e.emit(`drag-cancel`,{item:a,source:`keyboard`}),t.transition({type:`CANCEL_INTERACTION`}),i=null):m&&e.deselect(),r&&=!1,e.element.removeAttribute(`data-gridiot-keyboard-mode`);return}if(n.key===`Enter`||n.key===` `){if(!m)return;n.preventDefault();let r=s();if(r){let n=i??V(r),a=H(r);r.removeAttribute(`data-gridiot-dragging`),e.emit(`drag-end`,{item:r,cell:n,colspan:a.colspan,rowspan:a.rowspan,source:`keyboard`}),t.transition({type:`COMMIT_INTERACTION`}),t.transition({type:`FINISH_COMMIT`}),i=null}else{let n=m.id||m.getAttribute(`data-gridiot-item`)||``,r=H(m),a=V(m);t.transition({type:`START_INTERACTION`,context:{type:`drag`,mode:`keyboard`,itemId:n,element:m,columnCount:o()}}),i=a,m.setAttribute(`data-gridiot-dragging`,``),e.emit(`drag-start`,{item:m,cell:a,colspan:r.colspan,rowspan:r.rowspan,source:`keyboard`})}return}if(h){if(n.preventDefault(),n.altKey&&!n.ctrlKey&&!n.shiftKey&&m){let t=f(V(m),h,m);t&&e.select(t);return}if(!m)return;let r=V(m),c=H(m),l=e.getGridInfo();if(n.shiftKey&&!n.ctrlKey&&!n.altKey){let n=c.colspan,i=c.rowspan;switch(h){case`right`:n=Math.min(c.colspan+1,l.columns.length-r.column+1);break;case`left`:n=Math.max(1,c.colspan-1);break;case`down`:i=c.rowspan+1;break;case`up`:i=Math.max(1,c.rowspan-1);break}if(n===c.colspan&&i===c.rowspan)return;a&&=(clearTimeout(a.timeoutId),a.item.style.removeProperty(`view-transition-name`),null);let s=m.id||m.getAttribute(`data-gridiot-item`)||``;t.transition({type:`START_INTERACTION`,context:{type:`resize`,mode:`keyboard`,itemId:s,element:m,columnCount:o()}}),m.style.viewTransitionName=`resizing`;let u=h===`right`||h===`down`?`se`:h===`left`?`w`:`n`;e.emit(`resize-start`,{item:m,cell:r,colspan:c.colspan,rowspan:c.rowspan,handle:u}),m.setAttribute(`data-gridiot-colspan`,String(n)),m.setAttribute(`data-gridiot-rowspan`,String(i)),e.emit(`resize-end`,{item:m,cell:r,colspan:n,rowspan:i}),t.transition({type:`COMMIT_INTERACTION`}),t.transition({type:`FINISH_COMMIT`});let d=m;a={item:d,timeoutId:window.setTimeout(()=>{d.style.removeProperty(`view-transition-name`),a?.item===d&&(a=null)},250)};return}let u=1;(n.ctrlKey||n.metaKey)&&(u=h===`up`||h===`down`?c.rowspan:c.colspan);let p=d(r,h,u),g=Math.max(1,l.columns.length-c.colspan+1),_=Math.max(1,l.rows.length-c.rowspan+1),v={column:Math.max(1,Math.min(g,p.column)),row:Math.max(1,Math.min(_,p.row))};if(v.column===r.column&&v.row===r.row)return;let y=s();y?(i=v,e.emit(`drag-move`,{item:y,cell:v,x:0,y:0,colspan:c.colspan,rowspan:c.rowspan,source:`keyboard`})):(e.emit(`drag-start`,{item:m,cell:r,colspan:c.colspan,rowspan:c.rowspan,source:`keyboard`}),e.emit(`drag-end`,{item:m,cell:v,colspan:c.colspan,rowspan:c.rowspan,source:`keyboard`}));return}};return document.addEventListener(`keydown`,p),()=>{document.removeEventListener(`keydown`,p),e.element.removeAttribute(`data-gridiot-keyboard-mode`)}}function p(e){let t=document.createElement(`div`);t.setAttribute(`aria-live`,`assertive`),t.setAttribute(`aria-atomic`,`true`),Object.assign(t.style,{position:`absolute`,width:`1px`,height:`1px`,padding:`0`,margin:`-1px`,overflow:`hidden`,clip:`rect(0, 0, 0, 0)`,whiteSpace:`nowrap`,border:`0`}),e.element.appendChild(t);let n=null,r=null;function i(e){t.textContent=``,requestAnimationFrame(()=>{t.textContent=e})}function a(e){return e.getAttribute(`data-gridiot-label`)||e.getAttribute(`aria-label`)||e.id||`Item`}function o(e){return`row ${e.row}, column ${e.column}`}function s(t,n,r,i){let a=t.getAttribute(`data-gridiot-announce-${n}`)||e.element.getAttribute(`data-gridiot-announce-${n}`);return a?a.replace(/\{(\w+)\}/g,(e,t)=>r[t]??``):i}function c(e,t,n){let r=a(e),i=n?o(n):``;return s(e,t,{label:r,row:String(n?.row??``),column:String(n?.column??``)},{grab:`${r} grabbed. Position ${i}. Use arrow keys to move, Enter to drop, Escape to cancel.`,move:`Moved to ${i}.`,drop:`${r} dropped at ${i}.`,cancel:`${r} drag cancelled.`}[t])}function l(e,t,n){let r=a(e),i=n?.colspan!=null&&n?.rowspan!=null?`${n.colspan} columns by ${n.rowspan} rows`:``,c=n?.cell?o(n.cell):``;return s(e,t,{label:r,colspan:String(n?.colspan??``),rowspan:String(n?.rowspan??``),row:String(n?.cell?.row??``),column:String(n?.cell?.column??``)},{"resize-start":`${r} resize started. Size ${i}. Use pointer to resize, Escape to cancel.`,"resize-move":`Resized to ${i}.`,"resize-end":`${r} resized to ${i} at ${c}.`,"resize-cancel":`${r} resize cancelled.`}[t])}let u=e=>{n=e.detail.cell,i(c(e.detail.item,`grab`,e.detail.cell))},d=e=>{let{cell:t}=e.detail;n&&t.row===n.row&&t.column===n.column||(n=t,i(c(e.detail.item,`move`,t)))},f=e=>{n=null,i(c(e.detail.item,`drop`,e.detail.cell))},p=e=>{n=null,i(c(e.detail.item,`cancel`))},m=e=>{let{item:t,colspan:n,rowspan:a}=e.detail;r={colspan:n,rowspan:a},i(l(t,`resize-start`,{colspan:n,rowspan:a}))},h=e=>{let{item:t,cell:n,colspan:a,rowspan:o}=e.detail;r&&a===r.colspan&&o===r.rowspan||(r={colspan:a,rowspan:o},i(l(t,`resize-move`,{cell:n,colspan:a,rowspan:o})))},g=e=>{let{item:t,cell:n,colspan:a,rowspan:o}=e.detail;r=null,i(l(t,`resize-end`,{cell:n,colspan:a,rowspan:o}))},_=e=>{r=null,i(l(e.detail.item,`resize-cancel`))},v=U(e.element,{"gridiot:drag-start":u,"gridiot:drag-move":d,"gridiot:drag-end":f,"gridiot:drag-cancel":p,"gridiot:resize-start":m,"gridiot:resize-move":h,"gridiot:resize-end":g,"gridiot:resize-cancel":_});return()=>{v(),t.remove()}}function m(e,t,n,r){let i=t.getBoundingClientRect(),a=e.clientX-i.left,o=e.clientY-i.top,s=a<n,c=a>i.width-n,l=o<n,u=o>i.height-n;if(r===`corners`||r===`all`){if(l&&s)return`nw`;if(l&&c)return`ne`;if(u&&s)return`sw`;if(u&&c)return`se`}if(r===`edges`||r===`all`){if(l)return`n`;if(u)return`s`;if(s)return`w`;if(c)return`e`}return null}var h={nw:`nwse-resize`,se:`nwse-resize`,ne:`nesw-resize`,sw:`nesw-resize`,n:`ns-resize`,s:`ns-resize`,e:`ew-resize`,w:`ew-resize`};function g(){let e=document.createElement(`div`);return e.className=`gridiot-resize-label`,e.style.cssText=`
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		background: rgba(0, 0, 0, 0.8);
		color: white;
		padding: 4px 8px;
		border-radius: 4px;
		font-size: 14px;
		font-weight: 600;
		font-family: system-ui, sans-serif;
		pointer-events: none;
		z-index: 1000;
		white-space: nowrap;
	`,e}function _(e,t){let{core:n,handles:r=`corners`,handleSize:i=12,minSize:a={colspan:1,rowspan:1},maxSize:o={colspan:6,rowspan:6},showSizeLabel:s=!0}=t,c=null,l=null,u=null;function d(t,n){e.dispatchEvent(new CustomEvent(`gridiot:${t}`,{bubbles:!0,detail:n}))}function f(e,t,r){let{colspan:i,rowspan:a}=H(e),o=getComputedStyle(e),l=parseInt(o.gridColumnStart,10)||1,u=parseInt(o.gridRowStart,10)||1,f={colspan:i,rowspan:a},p={column:l,row:u},m=e.getBoundingClientRect(),h=null;s&&(h=g(),h.textContent=`${i}×${a}`,e.appendChild(h)),c={item:e,pointerId:r.pointerId,handle:t,startCell:p,originalSize:f,currentCell:{...p},currentSize:{...f},sizeLabel:h,initialRect:m,startPointerX:r.clientX,startPointerY:r.clientY},e.setAttribute(`data-gridiot-resizing`,``),e.setAttribute(`data-gridiot-handle-active`,t),e.removeAttribute(`data-gridiot-handle-hover`),e.setPointerCapture(r.pointerId),e.addEventListener(`pointermove`,S),e.addEventListener(`pointerup`,C),e.addEventListener(`pointercancel`,w);let _=e.id||e.getAttribute(`data-gridiot-item`)||``;n.stateMachine.transition({type:`START_INTERACTION`,context:{type:`resize`,mode:`pointer`,itemId:_,element:e,columnCount:n.getGridInfo().columns.length}}),d(`resize-start`,{item:e,cell:p,colspan:f.colspan,rowspan:f.rowspan,handle:t,source:`pointer`}),e.style.position=`fixed`,e.style.left=`${m.left}px`,e.style.top=`${m.top}px`,e.style.width=`${m.width}px`,e.style.height=`${m.height}px`,e.style.zIndex=`100`,e.style.viewTransitionName=`resizing`}function p(e){if(!c)return;let{item:t,handle:r,startCell:i,originalSize:s,currentCell:l,currentSize:u,sizeLabel:f,initialRect:p,startPointerX:m,startPointerY:h}=c,g=n.getGridInfo(),_=e.clientX-m,v=e.clientY-h,y=p.width,b=p.height,x=p.left,S=p.top,C=g.cellWidth,w=g.cellHeight,T=o.colspan*g.cellWidth+(o.colspan-1)*g.gap,E=o.rowspan*g.cellHeight+(o.rowspan-1)*g.gap,D=g.rect.right-p.left,O=g.rect.bottom-p.top,k=Math.min(T,D),A=Math.min(E,O);if((r===`e`||r===`se`||r===`ne`)&&(y=Math.max(C,Math.min(k,p.width+_))),r===`w`||r===`sw`||r===`nw`){let e=p.left-g.rect.left,t=Math.min(T,p.width+e),n=Math.max(-p.width+C,Math.min(t-p.width,-_));y=p.width+n,x=p.left-n}if((r===`s`||r===`se`||r===`sw`)&&(b=Math.max(w,Math.min(A,p.height+v))),r===`n`||r===`ne`||r===`nw`){let e=p.top-g.rect.top,t=Math.min(E,p.height+e),n=Math.max(-p.height+w,Math.min(t-p.height,-v));b=p.height+n,S=p.top-n}t.style.left=`${x}px`,t.style.top=`${S}px`,t.style.width=`${y}px`,t.style.height=`${b}px`;let j=g.cellWidth+g.gap,M=g.cellHeight+g.gap,N=(y+g.gap)/j,P=(b+g.gap)/M,F=.3,I=Math.floor(N+(1-F)),L=Math.floor(P+(1-F));I=Math.max(a.colspan,Math.min(o.colspan,I)),L=Math.max(a.rowspan,Math.min(o.rowspan,L));let R=i.column,z=i.row;(r===`w`||r===`sw`||r===`nw`)&&(R=i.column+s.colspan-1-I+1),(r===`n`||r===`ne`||r===`nw`)&&(z=i.row+s.rowspan-1-L+1),c.currentSize={colspan:I,rowspan:L},c.currentCell={column:R,row:z},f&&(f.textContent=`${I}×${L}`);let B;B=r===`se`||r===`s`||r===`e`?{column:i.column,row:i.row}:r===`nw`||r===`n`||r===`w`?{column:i.column+s.colspan-1,row:i.row+s.rowspan-1}:r===`ne`?{column:i.column,row:i.row+s.rowspan-1}:{column:i.column+s.colspan-1,row:i.row},d(`resize-move`,{item:t,cell:{column:R,row:z},anchorCell:B,startCell:i,colspan:I,rowspan:L,handle:r,source:`pointer`})}function _(e,t){e.releasePointerCapture(t),e.removeEventListener(`pointermove`,S),e.removeEventListener(`pointerup`,C),e.removeEventListener(`pointercancel`,w)}function v(e,t,n){_(e,t),n&&n.remove(),e.style.position=``,e.style.left=``,e.style.top=``,e.style.width=``,e.style.height=``,e.style.zIndex=``;let r=e.style.getPropertyValue(`--item-id`)||e.id||e.dataset.id;e.style.viewTransitionName=r||``,e.removeAttribute(`data-gridiot-resizing`),e.removeAttribute(`data-gridiot-handle-active`)}function y(){if(!c)return;let{item:e,pointerId:t,currentSize:r,currentCell:i,sizeLabel:a}=c;e.setAttribute(`data-gridiot-colspan`,String(r.colspan)),e.setAttribute(`data-gridiot-rowspan`,String(r.rowspan)),n.stateMachine.transition({type:`COMMIT_INTERACTION`}),d(`resize-end`,{item:e,cell:i,colspan:r.colspan,rowspan:r.rowspan,source:`pointer`}),v(e,t,a),c=null,n.stateMachine.transition({type:`FINISH_COMMIT`})}function b(){if(!c)return;let{item:e,pointerId:t,sizeLabel:r}=c;d(`resize-cancel`,{item:e,source:`pointer`}),n.stateMachine.transition({type:`CANCEL_INTERACTION`}),v(e,t,r),c=null}let x=e=>{let t=e.target.closest(`[data-gridiot-item]`);if(!t)return;let a=m(e,t,i,r);a&&(e.stopPropagation(),e.preventDefault(),n.select(t),f(t,a,e))},S=e=>{c&&e.pointerId===c.pointerId&&p(e)},C=e=>{c&&e.pointerId===c.pointerId&&y()},w=e=>{c&&e.pointerId===c.pointerId&&b()},T=e=>{if(c)return;let t=e.target.closest(`[data-gridiot-item]`);if(t){let n=m(e,t,i,r);(n!==u||t!==l)&&(l&&l!==t&&(l.style.cursor=``,l.removeAttribute(`data-gridiot-handle-hover`)),l===t&&u&&!n&&t.removeAttribute(`data-gridiot-handle-hover`),l=t,u=n,t.style.cursor=(n?h[n]:``)||``,n?t.setAttribute(`data-gridiot-handle-hover`,n):t.removeAttribute(`data-gridiot-handle-hover`))}else l&&(l.style.cursor=``,l.removeAttribute(`data-gridiot-handle-hover`),l=null,u=null)},E=e=>{e.key===`Escape`&&c&&b()};e.addEventListener(`pointerdown`,x,{capture:!0}),e.addEventListener(`pointermove`,T),document.addEventListener(`keydown`,E);function D(){e.removeEventListener(`pointerdown`,x,{capture:!0}),e.removeEventListener(`pointermove`,T),document.removeEventListener(`keydown`,E),c&&b()}return{destroy:D}}function v(e){let t=e.parentElement;for(;t;){let e=getComputedStyle(t),n=e.overflowY,r=e.overflowX;if(n===`auto`||n===`scroll`||r===`auto`||r===`scroll`)return t;t=t.parentElement}return window}function y(e){if(e===window)return{top:0,left:0,width:window.innerWidth,height:window.innerHeight};let t=e.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}}function b(e,t={}){let{mode:n=`contain`,scrollContainer:r,edgeSize:i=60,scrollSpeed:a=15,scrollBehavior:o=`smooth`,scrollMargin:s=20,scrollOnSelect:c=!0,autoScrollOnDrag:l=!0,settleDelay:u=150,core:d}=t,f=n,p=r??v(e),m=null,h=!1,g=null,_=0,b=0,x=null;d&&(d.cameraScrolling=!1);function S(t){t?(d&&(d.cameraScrolling=!0),x&&=(clearTimeout(x),null)):(x&&clearTimeout(x),x=setTimeout(()=>{d&&(d.cameraScrolling=!1),x=null,e.dispatchEvent(new CustomEvent(`gridiot:camera-settled`,{bubbles:!0}))},u))}function C(e,t=o){if(f===`off`)return;let n=e.getBoundingClientRect(),r=y(p);if(f===`center`){let e=p===window?window.scrollY+n.top-r.height/2+n.height/2:p.scrollTop+n.top-r.top-r.height/2+n.height/2,i=p===window?window.scrollX+n.left-r.width/2+n.width/2:p.scrollLeft+n.left-r.left-r.width/2+n.width/2;p===window?window.scrollTo({top:e,left:i,behavior:t}):p.scrollTo({top:e,left:i,behavior:t})}else e.scrollIntoView({behavior:t,block:`nearest`,inline:`nearest`})}function w(e,t){let n=y(p),r=0,o=0,s=e-n.left,c=t-n.top;return s<i?r=-a*(1-s/i):s>n.width-i&&(r=a*(1-(n.width-s)/i)),c<i?o=-a*(1-c/i):c>n.height-i&&(o=a*(1-(n.height-c)/i)),{x:r,y:o}}let T=!1;function E(){if(!h||!l||f===`off`){m=null,T&&=(S(!1),!1);return}let e=w(_,b);e.x!==0||e.y!==0?(T||S(!0),T=!0,p===window?window.scrollBy(e.x,e.y):(p.scrollLeft+=e.x,p.scrollTop+=e.y)):T&&=(S(!1),!1),m=requestAnimationFrame(E)}function D(){m===null&&(m=requestAnimationFrame(E))}function O(){m!==null&&(cancelAnimationFrame(m),m=null),S(!1)}function k(e){!h||!l||f===`off`||(_=e.clientX,b=e.clientY,D())}function A(e){h=!0,g=e.detail.source,g===`pointer`&&window.addEventListener(`pointermove`,k)}function j(e){f!==`off`&&(e.detail.source===`pointer`?(_=e.detail.x,b=e.detail.y):requestAnimationFrame(()=>{C(e.detail.item,`smooth`)}))}function M(e){let t=g===`pointer`;h=!1,g=null,O(),t&&window.removeEventListener(`pointermove`,k),!t&&c&&setTimeout(()=>{requestAnimationFrame(()=>{C(e.detail.item,`smooth`)})},100)}function N(e){let t=g===`pointer`;h=!1,g=null,O(),t&&window.removeEventListener(`pointermove`,k)}function P(e){!c||f===`off`||h||C(e.detail.item)}let F=U(e,{"gridiot:drag-start":A,"gridiot:drag-move":j,"gridiot:drag-end":M,"gridiot:drag-cancel":N,"gridiot:select":P});function I(){O(),F()}return{setMode(e){f=e,f===`off`&&O()},getMode(){return f},scrollTo:C,stop:O,destroy:I}}function x(e,t={}){let{className:n=`gridiot-placeholder`,element:r,disableViewTransition:i=!0}=t,a=null,o=!1;function s(){a||(r?(a=r,o=!0):(a=document.createElement(`div`),a.className=n),a.style.pointerEvents=`none`,i&&(a.style.viewTransitionName=`none`),e.appendChild(a))}function c(e,t,n=1,r=1){a&&(a.style.gridColumn=`${e} / span ${n}`,a.style.gridRow=`${t} / span ${r}`)}function l(){a&&(a.remove(),o||(a=null))}function u(e){let{cell:t,colspan:n,rowspan:r}=e.detail;s(),c(t.column,t.row,n,r)}function d(e){let{cell:t,colspan:n,rowspan:r}=e.detail;c(t.column,t.row,n,r)}function f(e){let{cell:t,colspan:n,rowspan:r}=e.detail;c(t.column,t.row,n,r)}function p(e){l()}function m(e){l()}function h(e){let{cell:t,colspan:n,rowspan:r}=e.detail;s(),c(t.column,t.row,n,r)}function g(e){let{cell:t,colspan:n,rowspan:r}=e.detail;c(t.column,t.row,n,r)}function _(e){l()}function v(e){l()}function y(){requestAnimationFrame(()=>{a&&!document.querySelector(`[data-gridiot-dragging]`)&&!document.querySelector(`[data-gridiot-resizing]`)&&l()})}function b(){l()}let x=U(e,{"gridiot:drag-start":u,"gridiot:drag-move":d,"gridiot:drag-end":p,"gridiot:drag-cancel":m,"gridiot:drop-preview":f,"gridiot:resize-start":h,"gridiot:resize-move":g,"gridiot:resize-end":_,"gridiot:resize-cancel":v}),S=U(document,{pointerup:y,pointercancel:b});return{show(e,t,n=1,r=1){s(),c(e,t,n,r)},hide(){l()},destroy(){l(),x(),S()}}}function S(e,t={}){let{selectorPrefix:n=`#`,selectorSuffix:r=``,excludeSelector:i=``,maxColumns:a}=t,o=[];for(let t of e){let e=a?Math.min(t.width,a):t.width,s=a?Math.max(1,Math.min(t.column,a-e+1)):t.column,c=`${n}${t.id}${r}${i}`,l=`${s} / span ${e}`,u=`${t.row} / span ${t.height}`;o.push(`${c} { grid-column: ${l}; grid-row: ${u}; }`)}return o.join(`
`)}function C(e){let t=e.querySelectorAll(`[data-gridiot-item]`);return Array.from(t).map(e=>{let t=e,n=getComputedStyle(t),r=parseInt(n.gridColumnStart,10)||1,i=parseInt(n.gridRowStart,10)||1,a=parseInt(t.getAttribute(`data-gridiot-colspan`)||`1`,10)||1,o=parseInt(t.getAttribute(`data-gridiot-rowspan`)||`1`,10)||1;return{id:t.dataset.id||t.dataset.gridiotItem||``,column:r,row:i,width:a,height:o}})}function w(e,t,n={}){let{selectorPrefix:r=`#`,selectorSuffix:i=``,core:a,layoutModel:o}=n,s=a?.styles??null;function c(){let t=getComputedStyle(e).gridTemplateColumns.split(` `).filter(Boolean);return Math.max(1,t.length)}let l=null,u=null,d=null,f=null,p=0,m=null,h=null,g=null,_=null,v=null,y=null,b=null;function x(e){return e.dataset.id||e.dataset.gridiotItem||``}function w(t,n){return C(e).map(e=>{let r=n.get(e.id);return r&&e.id!==t?{...e,column:r.column,row:r.row}:e})}function T(e,t,n,r,i){let a=[];for(let[o,s]of e)o===t?a.push({id:o,column:n.column,row:n.row,width:r,height:i}):a.push({id:o,column:s.column,row:s.row,width:s.width,height:s.height});return a}function E(e,t,n){if(!o||!t)return;let r=new Map;for(let t of e)r.set(t.id,{column:t.column,row:t.row});o.saveLayout(t,r),n&&n(),s&&(s.clear(`preview`),s.commit())}function D(t,n,a,o){let c=++p,l=m??b,u=()=>{if(c===p){if(s){let a=S(n?t.filter(e=>e.id!==n):t,{selectorPrefix:r,selectorSuffix:i,maxColumns:l??void 0});s.set(`preview`,a),s.commit();let o=e.querySelectorAll(`[data-gridiot-item]`);for(let e of o){let t=e,r=x(t),i=t.style.viewTransitionName;r!==n&&i!==`none`&&(t.style.gridColumn=``,t.style.gridRow=``)}}else{let r=e.querySelectorAll(`[data-gridiot-item]`);for(let e of r){let r=e,i=x(r);if(i===n)continue;let a=t.find(e=>e.id===i);if(a){let e=parseInt(r.getAttribute(`data-gridiot-colspan`)||`1`,10)||1,t=parseInt(r.getAttribute(`data-gridiot-rowspan`)||`1`,10)||1;r.style.gridColumn=`${a.column} / span ${e}`,r.style.gridRow=`${a.row} / span ${t}`}}}o&&o()}};a&&`startViewTransition`in document?(d&&n&&(d.style.viewTransitionName=`dragging`),document.startViewTransition(u)):u()}let O=t=>{let n=t.detail;d=n.item,u=x(n.item),f=n.source,m=c();let a=C(e);l=new Map;for(let e of a)l.set(e.id,{column:e.column,row:e.row});if(s){let t=e.querySelectorAll(`[data-gridiot-item]`);for(let e of t){let t=e;t!==d&&(t.style.gridColumn=``,t.style.gridRow=``)}let n=S(a,{selectorPrefix:r,selectorSuffix:i,maxColumns:m});s.set(`preview`,n),s.commit()}},k=null,A=n=>{if(!u||!l)return;let r=n.detail;if(a?.cameraScrolling){k=r.cell;return}k=null;let i=w(u,l),o=m??c(),s=t.calculateDragLayout(i,u,r.cell,o);D(s,u,!0),t.afterDragMove&&t.afterDragMove(s,u,e)},j=e=>{if(!u||!l)return;let n=e.detail,r=w(u,l),i=m??c(),a=t.calculateDragLayout(r,u,n.cell,i),o=f===`pointer`;d&&d.style.viewTransitionName===`dragging`&&(d.style.viewTransitionName=``);let s=!o,p=m;D(a,null,s,()=>E(a,p)),u=null,d=null,f=null,l=null,k=null,m=null},M=()=>{if(!u||!l)return;d&&d.style.viewTransitionName===`dragging`&&(d.style.viewTransitionName=``);let e=w(null,l),t=()=>D(e,null,!1);`startViewTransition`in document?document.startViewTransition(t):t(),u=null,d=null,f=null,l=null,k=null,m=null},N=()=>{if(!u||!l)return;let n=k;if(!n&&d){let e=d.getBoundingClientRect(),t=e.left+e.width/2,r=e.top+e.height/2;n=a?.getCellFromPoint(t,r)??null}if(!n)return;k=null;let r=w(u,l),i=m??c(),o=t.calculateDragLayout(r,u,n,i);D(o,u,!0),t.afterDragMove&&t.afterDragMove(o,u,e)},P=n=>{if(!t.calculateResizeLayout)return;let a=n.detail;g=a.item,h=x(a.item),_=a.source,b=c();let o=C(e);v=new Map;for(let e of o)v.set(e.id,{column:e.column,row:e.row,width:e.width,height:e.height});if(s){let t=e.querySelectorAll(`[data-gridiot-item]`);for(let e of t){let t=e;t!==g&&(t.style.gridColumn=``,t.style.gridRow=``)}let n=S(o,{selectorPrefix:r,selectorSuffix:i,maxColumns:b});s.set(`preview`,n),s.commit()}y=null},F=e=>{if(!t.calculateResizeLayout||!h||!v)return;let n=e.detail;if(y&&y.cell.column===n.cell.column&&y.cell.row===n.cell.row&&y.colspan===n.colspan&&y.rowspan===n.rowspan)return;y={cell:{...n.cell},colspan:n.colspan,rowspan:n.rowspan};let r=T(v,h,n.cell,n.colspan,n.rowspan),i=b??c();D(t.calculateResizeLayout(r,h,n.cell,n.colspan,n.rowspan,i),h,!0)},I=e=>{if(!t.calculateResizeLayout||!h||!v)return;let n=e.detail,r=T(v,h,n.cell,n.colspan,n.rowspan),i=b??c(),a=t.calculateResizeLayout(r,h,n.cell,n.colspan,n.rowspan,i),s=_!==`pointer`,l=h,u=b;D(a,null,s,()=>E(a,u,()=>{o.updateItemSize(l,{width:n.colspan,height:n.rowspan})})),h=null,g=null,_=null,v=null,y=null,b=null},L=()=>{if(!h||!v)return;let e=Array.from(v,([e,t])=>({id:e,column:t.column,row:t.row,width:t.width,height:t.height})),t=()=>D(e,null,!1);`startViewTransition`in document?document.startViewTransition(t):t(),h=null,g=null,_=null,v=null,y=null,b=null};return U(e,{"gridiot:drag-start":O,"gridiot:drag-move":A,"gridiot:drag-end":j,"gridiot:drag-cancel":M,"gridiot:camera-settled":N,"gridiot:resize-start":P,"gridiot:resize-move":F,"gridiot:resize-end":I,"gridiot:resize-cancel":L})}function T(e,t){return!(e.column+e.width<=t.column||t.column+t.width<=e.column||e.row+e.height<=t.row||t.row+t.height<=e.row)}function E(e,t,n,r=0){if(r>50)return;let i=e.filter(e=>e.id!==n&&e.id!==t.id&&T(t,e)).sort((e,t)=>t.row-e.row||e.column-t.column);for(let a of i){let i=t.row+t.height;a.row<i&&(a.row=i,E(e,a,n,r+1))}}function D(e,t){let n=[...e].filter(e=>e.id!==t).sort((e,t)=>e.row-t.row||e.column-t.column);for(let t of n){let n=0;for(;t.row>1&&n<100;)if(n++,--t.row,e.some(e=>e.id!==t.id&&T(t,e))){t.row+=1;break}}}function O(e,t,n,r={}){let{compact:i=!0}=r,a=e.map(e=>({...e})),o=a.find(e=>e.id===t);return o?(o.column=n.column,o.row=n.row,E(a,o,t),i&&D(a,t),a):a}function k(e,t={}){let{compaction:n=!0,...r}=t;return w(e,{calculateDragLayout(e,t,r){return O(e,t,r,{compact:n})},calculateResizeLayout(e,t,r){return O(e,t,r,{compact:n})}},r)}function A(e){return[...e].sort((e,t)=>e.row-t.row||e.column-t.column)}function j(e,t,n,r,i,a){if(t+r-1>a)return!1;for(let a=n;a<n+i;a++)for(let n=t;n<t+r;n++)if(e.has(`${n},${a}`))return!1;return!0}function M(e,t,n,r,i){for(let a=n;a<n+i;a++)for(let n=t;n<t+r;n++)e.add(`${n},${a}`)}function N(e,t){let n=new Set,r=[];for(let i of e){let e=Math.min(i.width,t),a=!1;for(let o=1;!a;o++){for(let s=1;s<=t;s++)if(j(n,s,o,e,i.height,t)){M(n,s,o,e,i.height),r.push({...i,column:s,row:o,width:e}),a=!0;break}o>100&&(r.push({...i,column:1,row:o,width:e}),M(n,1,o,e,i.height),a=!0)}}return r}function P(e,t){return e.row<t.row||e.row===t.row&&e.column<t.column}function F(e,t,n,r){let{columns:i}=r,a=A(e.map(e=>({...e}))),o=a.find(e=>e.id===t);if(!o)return N(a,i);let s=a.filter(e=>e.id!==t),c=N(s,i),l=c.length;for(let e=0;e<c.length;e++)if(!P(c[e],n)){l=e;break}return N([...s.slice(0,l),o,...s.slice(l)],i)}function I(e,t={}){return w(e,{calculateDragLayout(e,t,n,r){return F(e,t,n,{columns:r})},afterDragMove(e,t,n){let r=e.find(e=>e.id===t);if(r){let e={cell:{column:r.column,row:r.row},colspan:r.width,rowspan:r.height};queueMicrotask(()=>{n.dispatchEvent(new CustomEvent(`gridiot:drop-preview`,{detail:e,bubbles:!0}))})}},calculateResizeLayout(e,t,n,r,i,a){return N([...e].sort((e,t)=>e.row-t.row||e.column-t.column),a)}},t)}function L(e,t,n){let{layoutModel:r}=t,i=n?.styles??null,a=t.cellSize,o=t.gap;function s(){if(a!==void 0&&o!==void 0)return;let t=getComputedStyle(e);if(o===void 0&&(o=parseFloat(t.columnGap)||parseFloat(t.gap)||16),a===void 0){let e=parseFloat(t.gridAutoRows)||0;if(e>0)a=e;else{let e=t.gridTemplateColumns.split(` `);a=parseFloat(e[0]??`184`)||184}}}function c(){let t=getComputedStyle(e).gridTemplateColumns.split(` `).filter(Boolean);return Math.max(1,t.length)}function l(){if(!i)return;s();let t=e.id?`#${e.id}`:e.className?`.${e.className.split(` `)[0]}`:`.grid`,n=r.generateAllBreakpointCSS({cellSize:a,gap:o,gridSelector:t});i.set(`base`,n),i.commit()}i?.get(`base`)?.trim()||l();let u=r.subscribe(()=>l()),d=r.currentColumnCount,f=new ResizeObserver(()=>{let t=c();if(t!==d){let n=d;d=t,r.setCurrentColumnCount(t),e.dispatchEvent(new CustomEvent(`gridiot:column-count-change`,{bubbles:!0,detail:{previousCount:n,currentCount:t}}))}});return f.observe(e),()=>{f.disconnect(),u()}}function R(e,n={}){let{layoutModel:r,styleElement:i}=n,a=[],o=t(),s=null,c=new Map,l=[],u=i??document.createElement(`style`);i||(document.head.appendChild(u),a.push(()=>u.remove()));let m=u.textContent?.trim();m&&(c.set(`base`,m),l.push(`base`));let h={element:e,stateMachine:o,styles:{set(e,t){c.has(e)||l.push(e),c.set(e,t)},get(e){return c.get(e)??``},clear(e){c.has(e)&&c.set(e,``)},commit(){let e=[];for(let t of l){let n=c.get(t);n&&e.push(n)}u.textContent=e.join(`

`)}},cameraScrolling:!1,get selectedItem(){return s},set selectedItem(e){this.select(e)},select(e){if(e===s)return;let t=s;if(t&&t.removeAttribute(`data-gridiot-selected`),e){let t=e.id||e.getAttribute(`data-gridiot-item`)||``;o.transition({type:`SELECT`,itemId:t,element:e}),s=e,e.setAttribute(`data-gridiot-selected`,``),this.emit(`select`,{item:e})}else o.transition({type:`DESELECT`}),s=null,t&&this.emit(`deselect`,{item:t})},deselect(){this.select(null)},getCellFromPoint(t,n){let r=e.getBoundingClientRect();if(t<r.left||t>r.right||n<r.top||n>r.bottom)return null;let i=getComputedStyle(e),a=z(i.gridTemplateColumns),o=z(i.gridTemplateRows),s=parseFloat(i.columnGap)||0,c=parseFloat(i.rowGap)||0,l=t-r.left+e.scrollLeft,u=n-r.top+e.scrollTop;return{column:B(l,a,s),row:B(u,o,c)}},emit(t,n){e.dispatchEvent(new CustomEvent(`gridiot:${t}`,{bubbles:!0,detail:n}))},getGridInfo(){let t=e.getBoundingClientRect(),n=getComputedStyle(e),r=z(n.gridTemplateColumns),i=z(n.gridTemplateRows),a=parseFloat(n.columnGap)||0;return parseFloat(n.rowGap),{rect:t,columns:r,rows:i,gap:a,cellWidth:r[0]||0,cellHeight:i[0]||0}},destroy(){a.forEach(e=>e())}};if(n.pointer!==!1&&a.push(d(h)),n.keyboard!==!1&&a.push(f(h)),n.accessibility!==!1&&a.push(p(h)),n.resize!==!1){let t=_(e,{...typeof n.resize==`object`?n.resize:{},core:h});a.push(()=>t.destroy())}if(n.camera!==!1){let t=b(e,{...typeof n.camera==`object`?n.camera:{},core:h});a.push(()=>t.destroy())}if(n.placeholder!==!1){let t=x(e,typeof n.placeholder==`object`?n.placeholder:{});a.push(()=>t.destroy())}if(n.algorithm!==!1){let t=n.algorithmOptions??{};n.algorithm===`reorder`?a.push(I(e,{...t,core:h,layoutModel:r})):a.push(k(e,{...t,core:h,layoutModel:r}))}return n.responsive&&a.push(L(e,n.responsive,h)),h}function z(e){return e.split(` `).filter(Boolean).map(e=>parseFloat(e)||0)}function B(e,t,n){let r=0,i=n/2;for(let a=0;a<t.length;a++){let o=t[a];if(e<=r+o+i)return a+1;r+=o+n}return t.length||1}function V(e){let t=getComputedStyle(e);return{column:parseInt(t.gridColumnStart,10)||1,row:parseInt(t.gridRowStart,10)||1}}function H(e){return{colspan:parseInt(e.getAttribute(`data-gridiot-colspan`)||`1`,10)||1,rowspan:parseInt(e.getAttribute(`data-gridiot-rowspan`)||`1`,10)||1}}function U(e,t){for(let[n,r]of Object.entries(t))e.addEventListener(n,r);return()=>{for(let[n,r]of Object.entries(t))e.removeEventListener(n,r)}}var W=100;function G(e){let{maxColumns:t,minColumns:n=1,items:r}=e,i=new Map;for(let e of r)i.set(e.id,{id:e.id,width:e.width,height:e.height});let a=new Map(e.canonicalPositions),o=new Map(e.overrides),s=t,c=new Set;function l(){for(let e of Array.from(c))e()}function u(e){return Array.from(i.values()).sort((t,n)=>{let r=e.get(t.id)??{column:0,row:0},i=e.get(n.id)??{column:0,row:0};return r.row-i.row||r.column-i.column})}function d(e,t){let n=u(t),r=new Map,i=[];for(let t=0;t<W;t++)i.push(Array(e).fill(null));for(let t of n){let n=Math.min(t.width,e),a=t.height,o=!1;for(let s=0;s<W&&!o;s++)for(let c=0;c<=e-n&&!o;c++){let e=!0;for(let t=0;t<a&&e;t++)for(let r=0;r<n&&e;r++)i[s+t]?.[c+r]!==null&&(e=!1);if(e){r.set(t.id,{column:c+1,row:s+1});for(let e=0;e<a;e++)for(let r=0;r<n;r++)i[s+e]&&(i[s+e][c+r]=t.id);o=!0}}o||r.set(t.id,{column:1,row:W})}return r}function f(e,t,n){return e*t+(e-1)*n}return{get maxColumns(){return t},get minColumns(){return n},get items(){return i},get currentColumnCount(){return s},getLayoutForColumns(e){let r=Math.max(n,Math.min(t,e));if(r===t)return new Map(a);let i=o.get(r);return i?new Map(i):d(r,a)},getCurrentLayout(){return this.getLayoutForColumns(s)},hasOverride(e){return o.has(e)},getOverrideColumnCounts(){return Array.from(o.keys()).sort((e,t)=>t-e)},saveLayout(e,r){let i=Math.max(n,Math.min(t,e));i===t?a=new Map(r):o.set(i,new Map(r)),l()},clearOverride(e){e!==t&&o.delete(e)&&l()},updateItemSize(e,t){if(!i.get(e)){console.warn(`[layout-model] updateItemSize: item "${e}" not found in items Map. Available IDs:`,Array.from(i.keys()));return}i.set(e,{id:e,width:t.width,height:t.height}),l()},setCurrentColumnCount(e){let r=Math.max(n,Math.min(t,e));r!==s&&(s=r)},generateAllBreakpointCSS(e){let{selectorPrefix:r=`#`,selectorSuffix:s=``,cellSize:c,gap:l,gridSelector:u=`.grid-container`}=e??{cellSize:184,gap:16},d=[];d.push(`/* Fallback: canonical layout (before container queries evaluate) */`);for(let[e,t]of Array.from(a)){let n=i.get(e);n&&d.push(`${r}${e}${s} { grid-column: ${t.column} / span ${n.width}; grid-row: ${t.row} / span ${n.height}; }`)}d.push(``);for(let e=t;e>=n;e--){let a=this.getLayoutForColumns(e),p=f(e,c,l),m=o.has(e),h;h=e===t?`@container (min-width: ${p}px)`:e===n?`@container (max-width: ${f(e+1,c,l)-1}px)`:`@container (min-width: ${p}px) and (max-width: ${f(e+1,c,l)-1}px)`;let g=[];g.push(`${u} { grid-template-columns: repeat(${e}, 1fr); }`);for(let[t,n]of a){let a=i.get(t);if(!a)continue;let o=Math.min(a.width,e);g.push(`${r}${t}${s} { grid-column: ${n.column} / span ${o}; grid-row: ${n.row} / span ${a.height}; }`)}let _=e===t?`(canonical)`:m?`(override)`:`(derived)`;d.push(`/* ${e} columns ${_} */`),d.push(`${h} {`),d.push(g.map(e=>`  `+e).join(`
`)),d.push(`}`),d.push(``)}return d.join(`
`)},subscribe(e){return c.add(e),()=>c.delete(e)}}}export{r as animateFLIP,a as animateFLIPWithTracking,p as attachAccessibility,b as attachCamera,f as attachKeyboard,x as attachPlaceholder,d as attachPointer,k as attachPushAlgorithm,I as attachReorderAlgorithm,_ as attachResize,L as attachResponsive,O as calculateLayout,F as calculateReorderLayout,G as createLayoutModel,V as getItemCell,A as getItemOrder,H as getItemSize,i as getItemViewTransitionName,R as init,S as layoutToCSS,U as listenEvents,C as readItemsFromDOM,N as reflowItems};
//# sourceMappingURL=gridiot.min.js.map